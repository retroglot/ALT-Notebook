/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Lr=Object.defineProperty;var Ti=Object.getOwnPropertyDescriptor;var Oi=Object.getOwnPropertyNames;var Mi=Object.prototype.hasOwnProperty;var Bi=(s,e,t)=>e in s?Lr(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ji=(s,e)=>{for(var t in e)Lr(s,t,{get:e[t],enumerable:!0})},Fi=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Oi(e))!Mi.call(s,n)&&n!==t&&Lr(s,n,{get:()=>e[n],enumerable:!(r=Ti(e,n))||r.enumerable});return s};var Li=s=>Fi(Lr({},"__esModule",{value:!0}),s);var F=(s,e,t)=>(Bi(s,typeof e!="symbol"?e+"":e,t),t);var Ua={};ji(Ua,{default:()=>En});module.exports=Li(Ua);var ur=require("obsidian");var Ce=require("obsidian");function x(s,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t}function u(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)}var Rn=function(){let{crypto:s}=globalThis;if(s!=null&&s.randomUUID)return Rn=s.randomUUID.bind(s),s.randomUUID();let e=new Uint8Array(1),t=s?()=>s.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};function Ar(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}var hr=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){let e=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(e.stack=s.stack),s.cause&&!e.cause&&(e.cause=s.cause),s.name&&(e.name=s.name),e}}catch(e){}try{return new Error(JSON.stringify(s))}catch(e){}}return new Error(s)};var y=class extends Error{},z=class extends y{constructor(e,t,r,n){super(`${z.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.requestID=n==null?void 0:n.get("x-request-id"),this.error=t;let i=t;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,t,r){let n=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e||!n)return new Se({message:r,cause:hr(t)});let i=t==null?void 0:t.error;return e===400?new gt(e,i,r,n):e===401?new wt(e,i,r,n):e===403?new yt(e,i,r,n):e===404?new bt(e,i,r,n):e===409?new xt(e,i,r,n):e===422?new It(e,i,r,n):e===429?new kt(e,i,r,n):e>=500?new Et(e,i,r,n):new z(e,i,r,n)}},Q=class extends z{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Se=class extends z{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},ve=class extends Se{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}},gt=class extends z{},wt=class extends z{},yt=class extends z{},bt=class extends z{},xt=class extends z{},It=class extends z{},kt=class extends z{},Et=class extends z{},Rt=class extends y{constructor(){super("Could not parse response content as the length limit was reached")}},_t=class extends y{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},ce=class extends Error{constructor(e){super(e)}};var Ni=/^[a-z][a-z0-9+.-]*:/i,gs=s=>Ni.test(s),G=s=>(G=Array.isArray,G(s)),_n=G;function Cn(s){return typeof s!="object"?{}:s!=null?s:{}}function ws(s){if(!s)return!0;for(let e in s)return!1;return!0}function ys(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function fr(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}var bs=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new y(`${s} must be an integer`);if(e<0)throw new y(`${s} must be a positive integer`);return e};var xs=s=>{try{return JSON.parse(s)}catch(e){return}};var ue=s=>new Promise(e=>setTimeout(e,s));var Pe="6.8.1";var Es=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof navigator!="undefined";function zi(){return typeof Deno!="undefined"&&Deno.build!=null?"deno":typeof EdgeRuntime!="undefined"?"edge":Object.prototype.toString.call(typeof globalThis.process!="undefined"?globalThis.process:0)==="[object process]"?"node":"unknown"}var Ki=()=>{var t,r,n,i,o;let s=zi();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pe,"X-Stainless-OS":ks(Deno.build.os),"X-Stainless-Arch":Is(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(r=(t=Deno.version)==null?void 0:t.deno)!=null?r:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pe,"X-Stainless-OS":ks((n=globalThis.process.platform)!=null?n:"unknown"),"X-Stainless-Arch":Is((i=globalThis.process.arch)!=null?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!=null?o:"unknown"};let e=Qi();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Qi(){if(typeof navigator=="undefined"||!navigator)return null;let s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of s){let r=t.exec(navigator.userAgent);if(r){let n=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${n}.${i}.${o}`}}}return null}var Is=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",ks=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown"),Ur,Rs=()=>Ur!=null?Ur:Ur=Ki();function _s(){if(typeof fetch!="undefined")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Sn(...s){let e=globalThis.ReadableStream;if(typeof e=="undefined")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...s)}function Nr(s){let e=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return Sn({start(){},async pull(t){let{done:r,value:n}=await e.next();r?t.close():t.enqueue(n)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function vn(s){if(s[Symbol.asyncIterator])return s;let e=s.getReader();return{async next(){try{let t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){let t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Cs(s){var r,n;if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await((n=(r=s[Symbol.asyncIterator]()).return)==null?void 0:n.call(r));return}let e=s.getReader(),t=e.cancel();e.releaseLock(),await t}var Ss=({headers:s,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var zr="RFC3986",Pn=s=>String(s),Kr={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:Pn},Tn="RFC1738";var Qr=(s,e)=>{var t;return Qr=(t=Object.hasOwn)!=null?t:Function.prototype.call.bind(Object.prototype.hasOwnProperty),Qr(s,e)},Ae=(()=>{let s=[];for(let e=0;e<256;++e)s.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return s})();var On=1024,vs=(s,e,t,r,n)=>{if(s.length===0)return s;let i=s;if(typeof s=="symbol"?i=Symbol.prototype.toString.call(s):typeof s!="string"&&(i=String(s)),t==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<i.length;a+=On){let l=i.length>=On?i.slice(a,a+On):i,c=[];for(let A=0;A<l.length;++A){let h=l.charCodeAt(A);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===Tn&&(h===40||h===41)){c[c.length]=l.charAt(A);continue}if(h<128){c[c.length]=Ae[h];continue}if(h<2048){c[c.length]=Ae[192|h>>6]+Ae[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=Ae[224|h>>12]+Ae[128|h>>6&63]+Ae[128|h&63];continue}A+=1,h=65536+((h&1023)<<10|l.charCodeAt(A)&1023),c[c.length]=Ae[240|h>>18]+Ae[128|h>>12&63]+Ae[128|h>>6&63]+Ae[128|h&63]}o+=c.join("")}return o};function Ps(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function Mn(s,e){if(G(s)){let t=[];for(let r=0;r<s.length;r+=1)t.push(e(s[r]));return t}return e(s)}var Ts={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,e){return String(s)+"["+e+"]"},repeat(s){return String(s)}},Os=function(s,e){Array.prototype.push.apply(s,G(e)?e:[e])},Jr,J={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:vs,encodeValuesOnly:!1,format:zr,formatter:Pn,indices:!1,serializeDate(s){return(Jr!=null?Jr:Jr=Function.prototype.call.bind(Date.prototype.toISOString))(s)},skipNulls:!1,strictNullHandling:!1};function Di(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}var Bn={};function Ms(s,e,t,r,n,i,o,a,l,c,A,h,m,p,w,k,b,T){let E=s,U=T,P=0,I=!1;for(;(U=U.get(Bn))!==void 0&&!I;){let C=U.get(s);if(P+=1,typeof C!="undefined"){if(C===P)throw new RangeError("Cyclic object value");I=!0}typeof U.get(Bn)=="undefined"&&(P=0)}if(typeof c=="function"?E=c(e,E):E instanceof Date?E=m==null?void 0:m(E):t==="comma"&&G(E)&&(E=Mn(E,function(C){return C instanceof Date?m==null?void 0:m(C):C})),E===null){if(i)return l&&!k?l(e,J.encoder,b,"key",p):e;E=""}if(Di(E)||Ps(E)){if(l){let C=k?e:l(e,J.encoder,b,"key",p);return[(w==null?void 0:w(C))+"="+(w==null?void 0:w(l(E,J.encoder,b,"value",p)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(E)))]}let N=[];if(typeof E=="undefined")return N;let S;if(t==="comma"&&G(E))k&&l&&(E=Mn(E,l)),S=[{value:E.length>0?E.join(",")||null:void 0}];else if(G(c))S=c;else{let C=Object.keys(E);S=A?C.sort(A):C}let O=a?String(e).replace(/\./g,"%2E"):String(e),v=r&&G(E)&&E.length===1?O+"[]":O;if(n&&G(E)&&E.length===0)return v+"[]";for(let C=0;C<S.length;++C){let L=S[C],M=typeof L=="object"&&typeof L.value!="undefined"?L.value:E[L];if(o&&M===null)continue;let se=h&&a?L.replace(/\./g,"%2E"):L,me=G(E)?typeof t=="function"?t(v,se):v:v+(h?"."+se:"["+se+"]");T.set(s,P);let X=new WeakMap;X.set(Bn,T),Os(N,Ms(M,me,t,r,n,i,o,a,t==="comma"&&k&&G(E)?null:l,c,A,h,m,p,w,k,b,X))}return N}function Hi(s=J){if(typeof s.allowEmptyArrays!="undefined"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys!="undefined"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder!="undefined"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=s.charset||J.charset;if(typeof s.charset!="undefined"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=zr;if(typeof s.format!="undefined"){if(!Qr(Kr,s.format))throw new TypeError("Unknown format option provided.");t=s.format}let r=Kr[t],n=J.filter;(typeof s.filter=="function"||G(s.filter))&&(n=s.filter);let i;if(s.arrayFormat&&s.arrayFormat in Ts?i=s.arrayFormat:"indices"in s?i=s.indices?"indices":"repeat":i=J.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let o=typeof s.allowDots=="undefined"?s.encodeDotInKeys?!0:J.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:J.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:J.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:J.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter=="undefined"?J.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:J.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:J.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:J.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:J.encodeValuesOnly,filter:n,format:t,formatter:r,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:J.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:J.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:J.strictNullHandling}}function jn(s,e={}){let t=s,r=Hi(e),n,i;typeof r.filter=="function"?(i=r.filter,t=i("",t)):G(r.filter)&&(i=r.filter,n=i);let o=[];if(typeof t!="object"||t===null)return"";let a=Ts[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;n||(n=Object.keys(t)),r.sort&&n.sort(r.sort);let c=new WeakMap;for(let m=0;m<n.length;++m){let p=n[m];r.skipNulls&&t[p]===null||Os(o,Ms(t[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}let A=o.join(r.delimiter),h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),A.length>0?h+A:""}function Bs(s){let e=0;for(let n of s)e+=n.length;let t=new Uint8Array(e),r=0;for(let n of s)t.set(n,r),r+=n.length;return t}var qr;function Ct(s){let e;return(qr!=null?qr:(e=new globalThis.TextEncoder,qr=e.encode.bind(e)))(s)}var Dr;function Fn(s){let e;return(Dr!=null?Dr:(e=new globalThis.TextDecoder,Dr=e.decode.bind(e)))(s)}var $,ee,De=class{constructor(){$.set(this,void 0),ee.set(this,void 0),x(this,$,new Uint8Array,"f"),x(this,ee,null,"f")}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ct(e):e;x(this,$,Bs([u(this,$,"f"),t]),"f");let r=[],n;for(;(n=Yi(u(this,$,"f"),u(this,ee,"f")))!=null;){if(n.carriage&&u(this,ee,"f")==null){x(this,ee,n.index,"f");continue}if(u(this,ee,"f")!=null&&(n.index!==u(this,ee,"f")+1||n.carriage)){r.push(Fn(u(this,$,"f").subarray(0,u(this,ee,"f")-1))),x(this,$,u(this,$,"f").subarray(u(this,ee,"f")),"f"),x(this,ee,null,"f");continue}let i=u(this,ee,"f")!==null?n.preceding-1:n.preceding,o=Fn(u(this,$,"f").subarray(0,i));r.push(o),x(this,$,u(this,$,"f").subarray(n.index),"f"),x(this,ee,null,"f")}return r}flush(){return u(this,$,"f").length?this.decode(`
`):[]}};$=new WeakMap,ee=new WeakMap;De.NEWLINE_CHARS=new Set([`
`,"\r"]);De.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Yi(s,e){for(let n=e!=null?e:0;n<s.length;n++){if(s[n]===10)return{preceding:n,index:n+1,carriage:!1};if(s[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function js(s){for(let r=0;r<s.length-1;r++){if(s[r]===10&&s[r+1]===10||s[r]===13&&s[r+1]===13)return r+2;if(s[r]===13&&s[r+1]===10&&r+3<s.length&&s[r+2]===13&&s[r+3]===10)return r+4}return-1}var Gr={off:0,error:200,warn:300,info:400,debug:500},Ln=(s,e,t)=>{if(s){if(ys(Gr,s))return s;K(t).warn(`${e} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(Gr))}`)}};function dr(){}function Hr(s,e,t){return!e||Gr[s]>Gr[t]?dr:e[s].bind(e)}var Wi={error:dr,warn:dr,info:dr,debug:dr},Fs=new WeakMap;function K(s){var i;let e=s.logger,t=(i=s.logLevel)!=null?i:"off";if(!e)return Wi;let r=Fs.get(e);if(r&&r[0]===t)return r[1];let n={error:Hr("error",e,t),warn:Hr("warn",e,t),info:Hr("info",e,t),debug:Hr("debug",e,t)};return Fs.set(e,[t,n]),n}var ge=s=>(s.options&&(s.options={...s.options},delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);var pr,Y=class{constructor(e,t,r){this.iterator=e,pr.set(this,void 0),this.controller=t,x(this,pr,r,"f")}static fromSSEResponse(e,t,r){let n=!1,i=r?K(r):console;async function*o(){if(n)throw new y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(let l of Zi(e,t))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let c;try{c=JSON.parse(l.data)}catch(A){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),A}if(c&&c.error)throw new z(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(l.data)}catch(A){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),A}if(l.event=="error")throw new z(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}a=!0}catch(l){if(Ar(l))return;throw l}finally{a||t.abort()}}return new Y(o,t,r)}static fromReadableStream(e,t,r){let n=!1;async function*i(){let a=new De,l=vn(e);for await(let c of l)for(let A of a.decode(c))yield A;for(let c of a.flush())yield c}async function*o(){if(n)throw new y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(let l of i())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(Ar(l))return;throw l}finally{a||t.abort()}}return new Y(o,t,r)}[(pr=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),n=i=>({next:()=>{if(i.length===0){let o=r.next();e.push(o),t.push(o)}return i.shift()}});return[new Y(()=>n(e),this.controller,u(this,pr,"f")),new Y(()=>n(t),this.controller,u(this,pr,"f"))]}toReadableStream(){let e=this,t;return Sn({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{let{value:n,done:i}=await t.next();if(i)return r.close();let o=Ct(JSON.stringify(n)+`
`);r.enqueue(o)}catch(n){r.error(n)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}};async function*Zi(s,e){if(!s.body)throw e.abort(),typeof globalThis.navigator!="undefined"&&globalThis.navigator.product==="ReactNative"?new y("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new y("Attempted to iterate over a response with no body");let t=new Un,r=new De,n=vn(s.body);for await(let i of Vi(n))for(let o of r.decode(i)){let a=t.decode(o);a&&(yield a)}for(let i of r.flush()){let o=t.decode(i);o&&(yield o)}}async function*Vi(s){let e=new Uint8Array;for await(let t of s){if(t==null)continue;let r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Ct(t):t,n=new Uint8Array(e.length+r.length);n.set(e),n.set(r,e.length),e=n;let i;for(;(i=js(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}var Un=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=Xi(e,":");return n.startsWith(" ")&&(n=n.substring(1)),t==="event"?this.event=n:t==="data"&&this.data.push(n),null}};function Xi(s,e){let t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}async function Yr(s,e){let{response:t,requestLogID:r,retryOfRequestLogID:n,startTime:i}=e,o=await(async()=>{var h;if(e.options.stream)return K(s).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,s):Y.fromSSEResponse(t,e.controller,s);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let a=t.headers.get("content-type"),l=(h=a==null?void 0:a.split(";")[0])==null?void 0:h.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){let m=await t.json();return Nn(m,t)}return await t.text()})();return K(s).debug(`[${r}] response parsed`,ge({retryOfRequestLogID:n,url:t.url,status:t.status,body:o,durationMs:Date.now()-i})),o}function Nn(s,e){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var mr,we=class extends Promise{constructor(e,t,r=Yr){super(n=>{n(null)}),this.responsePromise=t,this.parseResponse=r,mr.set(this,void 0),x(this,mr,e,"f")}_thenUnwrap(e){return new we(u(this,mr,"f"),this.responsePromise,async(t,r)=>Nn(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(u(this,mr,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};mr=new WeakMap;var Wr,gr=class{constructor(e,t,r,n){Wr.set(this,void 0),x(this,Wr,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await u(this,Wr,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Wr=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}},wr=class extends we{constructor(e,t,r){super(e,t,async(n,i)=>new r(n,i.response,await Yr(n,i),i.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let t of e)yield t}},he=class extends gr{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageRequestOptions(){return null}},_=class extends gr{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;let e=this.getPaginatedItems(),t=(r=e[e.length-1])==null?void 0:r.id;return t?{...this.options,query:{...Cn(this.options.query),after:t}}:null}},ye=class extends gr{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.last_id;return e?{...this.options,query:{...Cn(this.options.query),after:e}}:null}};var Qn=()=>{var s;if(typeof File=="undefined"){let{process:e}=globalThis,t=typeof((s=e==null?void 0:e.versions)==null?void 0:s.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function St(s,e,t){return Qn(),new File(s,e!=null?e:"unknown_file",t)}function yr(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}var Zr=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",Jn=async(s,e)=>zn(s.body)?{...s,body:await Us(s.body,e)}:s,te=async(s,e)=>({...s,body:await Us(s.body,e)}),Ls=new WeakMap;function eo(s){let e=typeof s=="function"?s:s.fetch,t=Ls.get(e);if(t)return t;let r=(async()=>{try{let n="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new n(i).text()}catch(n){return!0}})();return Ls.set(e,r),r}var Us=async(s,e)=>{if(!await eo(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let t=new FormData;return await Promise.all(Object.entries(s||{}).map(([r,n])=>Kn(t,r,n))),t},Ns=s=>s instanceof Blob&&"name"in s,to=s=>typeof s=="object"&&s!==null&&(s instanceof Response||Zr(s)||Ns(s)),zn=s=>{if(to(s))return!0;if(Array.isArray(s))return s.some(zn);if(s&&typeof s=="object"){for(let e in s)if(zn(s[e]))return!0}return!1},Kn=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(t instanceof Response)s.append(e,St([await t.blob()],yr(t)));else if(Zr(t))s.append(e,St([await new Response(Nr(t)).blob()],yr(t)));else if(Ns(t))s.append(e,t,yr(t));else if(Array.isArray(t))await Promise.all(t.map(r=>Kn(s,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,n])=>Kn(s,`${e}[${r}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var zs=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",ro=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&zs(s),no=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function Vr(s,e,t){if(Qn(),s=await s,ro(s))return s instanceof File?s:St([await s.arrayBuffer()],s.name);if(no(s)){let n=await s.blob();return e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()),St(await qn(n),e,t)}let r=await qn(s);if(e||(e=yr(s)),!(t!=null&&t.type)){let n=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof n=="string"&&(t={...t,type:n})}return St(r,e,t)}async function qn(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(zs(s))e.push(s instanceof Blob?s:await s.arrayBuffer());else if(Zr(s))for await(let r of s)e.push(...await qn(r));else{let r=(t=s==null?void 0:s.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof s}${r?`; constructor: ${r}`:""}${so(s)}`)}return e}function so(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}var d=class{constructor(e){this._client=e}};function Qs(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Ks=Object.freeze(Object.create(null)),oo=(s=Qs)=>function(t,...r){if(t.length===1)return t[0];let n=!1,i=[],o=t.reduce((A,h,m)=>{var k,b,T;/[?#]/.test(h)&&(n=!0);let p=r[m],w=(n?encodeURIComponent:s)(""+p);return m!==r.length&&(p==null||typeof p=="object"&&p.toString===((T=Object.getPrototypeOf((b=Object.getPrototypeOf((k=p.hasOwnProperty)!=null?k:Ks))!=null?b:Ks))==null?void 0:T.toString))&&(w=p+"",i.push({start:A.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),A+h+(m===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((A,h)=>A.start-h.start),i.length>0){let A=0,h=i.reduce((m,p)=>{let w=" ".repeat(p.start-A),k="^".repeat(p.length);return A=p.start+p.length,m+w+k},"");throw new y(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${o}
${h}`)}return o},f=oo(Qs);var He=class extends d{list(e,t={},r){return this._client.getAPIList(f`/chat/completions/${e}/messages`,_,{query:t,...r})}};function br(s){return s!==void 0&&"function"in s&&s.function!==void 0}function xr(s){return(s==null?void 0:s.$brand)==="auto-parseable-response-format"}function Ge(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function Js(s,e){return!e||!Dn(e)?{...s,choices:s.choices.map(t=>(Ds(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Ir(s,e)}function Ir(s,e){let t=s.choices.map(r=>{var n,i;if(r.finish_reason==="length")throw new Rt;if(r.finish_reason==="content_filter")throw new _t;return Ds(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:(i=(n=r.message.tool_calls)==null?void 0:n.map(o=>uo(e,o)))!=null?i:void 0}:void 0,parsed:r.message.content&&!r.message.refusal?co(e,r.message.content):null}}});return{...s,choices:t}}function co(s,e){var t,r;return((t=s.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=s.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(e):JSON.parse(e):null}function uo(s,e){var r;let t=(r=s.tools)==null?void 0:r.find(n=>{var i;return br(n)&&((i=n.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ge(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function qs(s,e){var r;if(!s||!("tools"in s)||!s.tools)return!1;let t=(r=s.tools)==null?void 0:r.find(n=>{var i;return br(n)&&((i=n.function)==null?void 0:i.name)===e.function.name});return br(t)&&(Ge(t)||(t==null?void 0:t.function.strict)||!1)}function Dn(s){var e,t;return xr(s.response_format)?!0:(t=(e=s.tools)==null?void 0:e.some(r=>Ge(r)||r.type==="function"&&r.function.strict===!0))!=null?t:!1}function Ds(s){for(let e of s||[])if(e.type!=="function")throw new y(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Hs(s){for(let e of s!=null?s:[]){if(e.type!=="function")throw new y(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new y(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var vt=s=>(s==null?void 0:s.role)==="assistant",Hn=s=>(s==null?void 0:s.role)==="tool";var Gn,Xr,$r,kr,Er,en,Rr,be,_r,tn,rn,Pt,Gs,Te=class{constructor(){Gn.add(this),this.controller=new AbortController,Xr.set(this,void 0),$r.set(this,()=>{}),kr.set(this,()=>{}),Er.set(this,void 0),en.set(this,()=>{}),Rr.set(this,()=>{}),be.set(this,{}),_r.set(this,!1),tn.set(this,!1),rn.set(this,!1),Pt.set(this,!1),x(this,Xr,new Promise((e,t)=>{x(this,$r,e,"f"),x(this,kr,t,"f")}),"f"),x(this,Er,new Promise((e,t)=>{x(this,en,e,"f"),x(this,Rr,t,"f")}),"f"),u(this,Xr,"f").catch(()=>{}),u(this,Er,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},u(this,Gn,"m",Gs).bind(this))},0)}_connected(){this.ended||(u(this,$r,"f").call(this),this._emit("connect"))}get ended(){return u(this,_r,"f")}get errored(){return u(this,tn,"f")}get aborted(){return u(this,rn,"f")}abort(){this.controller.abort()}on(e,t){return(u(this,be,"f")[e]||(u(this,be,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=u(this,be,"f")[e];if(!r)return this;let n=r.findIndex(i=>i.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(u(this,be,"f")[e]||(u(this,be,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{x(this,Pt,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){x(this,Pt,!0,"f"),await u(this,Er,"f")}_emit(e,...t){if(u(this,_r,"f"))return;e==="end"&&(x(this,_r,!0,"f"),u(this,en,"f").call(this));let r=u(this,be,"f")[e];if(r&&(u(this,be,"f")[e]=r.filter(n=>!n.once),r.forEach(({listener:n})=>n(...t))),e==="abort"){let n=t[0];!u(this,Pt,"f")&&!(r!=null&&r.length)&&Promise.reject(n),u(this,kr,"f").call(this,n),u(this,Rr,"f").call(this,n),this._emit("end");return}if(e==="error"){let n=t[0];!u(this,Pt,"f")&&!(r!=null&&r.length)&&Promise.reject(n),u(this,kr,"f").call(this,n),u(this,Rr,"f").call(this,n),this._emit("end")}}_emitFinal(){}};Xr=new WeakMap,$r=new WeakMap,kr=new WeakMap,Er=new WeakMap,en=new WeakMap,Rr=new WeakMap,be=new WeakMap,_r=new WeakMap,tn=new WeakMap,rn=new WeakMap,Pt=new WeakMap,Gn=new WeakSet,Gs=function(e){if(x(this,tn,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Q),e instanceof Q)return x(this,rn,!0,"f"),this._emit("abort",e);if(e instanceof y)return this._emit("error",e);if(e instanceof Error){let t=new y(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new y(String(e)))};function Ys(s){return typeof s.parse=="function"}var W,Yn,nn,Wn,Zn,Vn,Ws,Zs,Ao=10,Tt=class extends Te{constructor(){super(...arguments),W.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),Hn(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(vt(e)&&e.tool_calls)for(let r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new y("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),u(this,W,"m",Yn).call(this)}async finalMessage(){return await this.done(),u(this,W,"m",nn).call(this)}async finalFunctionToolCall(){return await this.done(),u(this,W,"m",Wn).call(this)}async finalFunctionToolCallResult(){return await this.done(),u(this,W,"m",Zn).call(this)}async totalUsage(){return await this.done(),u(this,W,"m",Vn).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=u(this,W,"m",nn).call(this);t&&this._emit("finalMessage",t);let r=u(this,W,"m",Yn).call(this);r&&this._emit("finalContent",r);let n=u(this,W,"m",Wn).call(this);n&&this._emit("finalFunctionToolCall",n);let i=u(this,W,"m",Zn).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",u(this,W,"m",Vn).call(this))}async _createChatCompletion(e,t,r){let n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),u(this,W,"m",Ws).call(this,t);let i=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ir(i,t))}async _runChatCompletion(e,t,r){for(let n of t.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){var p,w,k;let n="tool",{tool_choice:i="auto",stream:o,...a}=t,l=typeof i!="string"&&i.type==="function"&&((p=i==null?void 0:i.function)==null?void 0:p.name),{maxChatCompletions:c=Ao}=r||{},A=t.tools.map(b=>{if(Ge(b)){if(!b.$callback)throw new y("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),h={};for(let b of A)b.type==="function"&&(h[b.function.name||b.function.function.name]=b.function);let m="tools"in t?A.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(let b of t.messages)this._addMessage(b,!1);for(let b=0;b<c;++b){let E=(w=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:w.message;if(!E)throw new y("missing message in ChatCompletion response");if(!((k=E.tool_calls)!=null&&k.length))return;for(let U of E.tool_calls){if(U.type!=="function")continue;let P=U.id,{name:I,arguments:N}=U.function,S=h[I];if(S){if(l&&l!==I){let L=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,tool_call_id:P,content:L});continue}}else{let L=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(h).map(M=>JSON.stringify(M)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:P,content:L});continue}let O;try{O=Ys(S)?await S.parse(N):N}catch(L){let M=L instanceof Error?L.message:String(L);this._addMessage({role:n,tool_call_id:P,content:M});continue}let v=await S.function(O,this),C=u(this,W,"m",Zs).call(this,v);if(this._addMessage({role:n,tool_call_id:P,content:C}),l)return}}}};W=new WeakSet,Yn=function(){var e;return(e=u(this,W,"m",nn).call(this).content)!=null?e:null},nn=function(){var t,r;let e=this.messages.length;for(;e-- >0;){let n=this.messages[e];if(vt(n))return{...n,content:(t=n.content)!=null?t:null,refusal:(r=n.refusal)!=null?r:null}}throw new y("stream ended without producing a ChatCompletionMessage with role=assistant")},Wn=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){let n=this.messages[r];if(vt(n)&&((e=n==null?void 0:n.tool_calls)!=null&&e.length))return(t=n.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:t.function}},Zn=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(Hn(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var n;return r.role==="assistant"&&((n=r.tool_calls)==null?void 0:n.some(i=>i.type==="function"&&i.id===t.tool_call_id))}))return t.content}},Vn=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Ws=function(e){if(e.n!=null&&e.n>1)throw new y("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Zs=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var Ye=class extends Tt{static runTools(e,t,r){let n=new Ye,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}_addMessage(e,t=!0){super._addMessage(e,t),vt(e)&&e.content&&this._emit("content",e.content)}};var D={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},Xn=class extends Error{},$n=class extends Error{};function ho(s,e=D.ALL){if(typeof s!="string")throw new TypeError(`expecting str, got ${typeof s}`);if(!s.trim())throw new Error(`${s} is empty`);return fo(s.trim(),e)}var fo=(s,e)=>{let t=s.length,r=0,n=m=>{throw new Xn(`${m} at position ${r}`)},i=m=>{throw new $n(`${m} at position ${r}`)},o=()=>(h(),r>=t&&n("Unexpected end of input"),s[r]==='"'?a():s[r]==="{"?l():s[r]==="["?c():s.substring(r,r+4)==="null"||D.NULL&e&&t-r<4&&"null".startsWith(s.substring(r))?(r+=4,null):s.substring(r,r+4)==="true"||D.BOOL&e&&t-r<4&&"true".startsWith(s.substring(r))?(r+=4,!0):s.substring(r,r+5)==="false"||D.BOOL&e&&t-r<5&&"false".startsWith(s.substring(r))?(r+=5,!1):s.substring(r,r+8)==="Infinity"||D.INFINITY&e&&t-r<8&&"Infinity".startsWith(s.substring(r))?(r+=8,1/0):s.substring(r,r+9)==="-Infinity"||D.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(s.substring(r))?(r+=9,-1/0):s.substring(r,r+3)==="NaN"||D.NAN&e&&t-r<3&&"NaN".startsWith(s.substring(r))?(r+=3,NaN):A()),a=()=>{let m=r,p=!1;for(r++;r<t&&(s[r]!=='"'||p&&s[r-1]==="\\");)p=s[r]==="\\"?!p:!1,r++;if(s.charAt(r)=='"')try{return JSON.parse(s.substring(m,++r-Number(p)))}catch(w){i(String(w))}else if(D.STR&e)try{return JSON.parse(s.substring(m,r-Number(p))+'"')}catch(w){return JSON.parse(s.substring(m,s.lastIndexOf("\\"))+'"')}n("Unterminated string literal")},l=()=>{r++,h();let m={};try{for(;s[r]!=="}";){if(h(),r>=t&&D.OBJ&e)return m;let p=a();h(),r++;try{let w=o();Object.defineProperty(m,p,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(D.OBJ&e)return m;throw w}h(),s[r]===","&&r++}}catch(p){if(D.OBJ&e)return m;n("Expected '}' at end of object")}return r++,m},c=()=>{r++;let m=[];try{for(;s[r]!=="]";)m.push(o()),h(),s[r]===","&&r++}catch(p){if(D.ARR&e)return m;n("Expected ']' at end of array")}return r++,m},A=()=>{if(r===0){s==="-"&&D.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(s)}catch(p){if(D.NUM&e)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch(w){}i(String(p))}}let m=r;for(s[r]==="-"&&r++;s[r]&&!",]}".includes(s[r]);)r++;r==t&&!(D.NUM&e)&&n("Unterminated number literal");try{return JSON.parse(s.substring(m,r))}catch(p){s.substring(m,r)==="-"&&D.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(s.substring(m,s.lastIndexOf("e")))}catch(w){i(String(w))}}},h=()=>{for(;r<t&&` 
\r	`.includes(s[r]);)r++};return o()},es=s=>ho(s,D.ALL^D.NUM);var q,xe,Ot,Oe,ts,sn,rs,ns,ss,on,is,Vs,fe=class extends Tt{constructor(e){super(),q.add(this),xe.set(this,void 0),Ot.set(this,void 0),Oe.set(this,void 0),x(this,xe,e,"f"),x(this,Ot,[],"f")}get currentChatCompletionSnapshot(){return u(this,Oe,"f")}static fromReadableStream(e){let t=new fe(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){let n=new fe(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){var o;super._createChatCompletion;let n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),u(this,q,"m",ts).call(this);let i=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(let a of i)u(this,q,"m",rs).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new Q;return this._addChatCompletion(u(this,q,"m",on).call(this))}async _fromReadableStream(e,t){var o;let r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),u(this,q,"m",ts).call(this),this._connected();let n=Y.fromReadableStream(e,this.controller),i;for await(let a of n)i&&i!==a.id&&this._addChatCompletion(u(this,q,"m",on).call(this)),u(this,q,"m",rs).call(this,a),i=a.id;if((o=n.controller.signal)!=null&&o.aborted)throw new Q;return this._addChatCompletion(u(this,q,"m",on).call(this))}[(xe=new WeakMap,Ot=new WeakMap,Oe=new WeakMap,q=new WeakSet,ts=function(){this.ended||x(this,Oe,void 0,"f")},sn=function(t){let r=u(this,Ot,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},u(this,Ot,"f")[t.index]=r,r)},rs=function(t){var n,i,o,a,l,c,A,h,m,p,w,k,b,T,E,U,P,I,N,S;if(this.ended)return;let r=u(this,q,"m",Vs).call(this,t);this._emit("chunk",t,r);for(let O of t.choices){let v=r.choices[O.index];O.delta.content!=null&&((n=v.message)==null?void 0:n.role)==="assistant"&&((i=v.message)!=null&&i.content)&&(this._emit("content",O.delta.content,v.message.content),this._emit("content.delta",{delta:O.delta.content,snapshot:v.message.content,parsed:v.message.parsed})),O.delta.refusal!=null&&((o=v.message)==null?void 0:o.role)==="assistant"&&((a=v.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:O.delta.refusal,snapshot:v.message.refusal}),((l=O.logprobs)==null?void 0:l.content)!=null&&((c=v.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(A=O.logprobs)==null?void 0:A.content,snapshot:(m=(h=v.logprobs)==null?void 0:h.content)!=null?m:[]}),((p=O.logprobs)==null?void 0:p.refusal)!=null&&((w=v.message)==null?void 0:w.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(k=O.logprobs)==null?void 0:k.refusal,snapshot:(T=(b=v.logprobs)==null?void 0:b.refusal)!=null?T:[]});let C=u(this,q,"m",sn).call(this,v);v.finish_reason&&(u(this,q,"m",ss).call(this,v),C.current_tool_call_index!=null&&u(this,q,"m",ns).call(this,v,C.current_tool_call_index));for(let L of(E=O.delta.tool_calls)!=null?E:[])C.current_tool_call_index!==L.index&&(u(this,q,"m",ss).call(this,v),C.current_tool_call_index!=null&&u(this,q,"m",ns).call(this,v,C.current_tool_call_index)),C.current_tool_call_index=L.index;for(let L of(U=O.delta.tool_calls)!=null?U:[]){let M=(P=v.message.tool_calls)==null?void 0:P[L.index];M!=null&&M.type&&((M==null?void 0:M.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(I=M.function)==null?void 0:I.name,index:L.index,arguments:M.function.arguments,parsed_arguments:M.function.parsed_arguments,arguments_delta:(S=(N=L.function)==null?void 0:N.arguments)!=null?S:""}):(M==null||M.type,void 0))}}},ns=function(t,r){var o,a,l;if(u(this,q,"m",sn).call(this,t).done_tool_calls.has(r))return;let i=(o=t.message.tool_calls)==null?void 0:o[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){let c=(l=(a=u(this,xe,"f"))==null?void 0:a.tools)==null?void 0:l.find(A=>br(A)&&A.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Ge(c)?c.$parseRaw(i.function.arguments):c!=null&&c.function.strict?JSON.parse(i.function.arguments):null})}else i.type},ss=function(t){var n,i;let r=u(this,q,"m",sn).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;let o=u(this,q,"m",is).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(n=t.logprobs)!=null&&n.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(i=t.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},on=function(){if(this.ended)throw new y("stream has ended, this shouldn't happen");let t=u(this,Oe,"f");if(!t)throw new y("request ended without sending any chunks");return x(this,Oe,void 0,"f"),x(this,Ot,[],"f"),po(t,u(this,xe,"f"))},is=function(){var r;let t=(r=u(this,xe,"f"))==null?void 0:r.response_format;return xr(t)?t:null},Vs=function(t){var A,h,m,p,w,k;var r,n,i,o;let a=u(this,Oe,"f"),{choices:l,...c}=t;a?Object.assign(a,c):a=x(this,Oe,{...c,choices:[]},"f");for(let{delta:b,finish_reason:T,index:E,logprobs:U=null,...P}of t.choices){let I=a.choices[E];if(I||(I=a.choices[E]={finish_reason:T,index:E,message:{},logprobs:U,...P}),U)if(!I.logprobs)I.logprobs=Object.assign({},U);else{let{content:M,refusal:se,...me}=U;Object.assign(I.logprobs,me),M&&((A=(r=I.logprobs).content)!=null||(r.content=[]),I.logprobs.content.push(...M)),se&&((h=(n=I.logprobs).refusal)!=null||(n.refusal=[]),I.logprobs.refusal.push(...se))}if(T&&(I.finish_reason=T,u(this,xe,"f")&&Dn(u(this,xe,"f")))){if(T==="length")throw new Rt;if(T==="content_filter")throw new _t}if(Object.assign(I,P),!b)continue;let{content:N,refusal:S,function_call:O,role:v,tool_calls:C,...L}=b;if(Object.assign(I.message,L),S&&(I.message.refusal=(I.message.refusal||"")+S),v&&(I.message.role=v),O&&(I.message.function_call?(O.name&&(I.message.function_call.name=O.name),O.arguments&&((m=(i=I.message.function_call).arguments)!=null||(i.arguments=""),I.message.function_call.arguments+=O.arguments)):I.message.function_call=O),N&&(I.message.content=(I.message.content||"")+N,!I.message.refusal&&u(this,q,"m",is).call(this)&&(I.message.parsed=es(I.message.content))),C){I.message.tool_calls||(I.message.tool_calls=[]);for(let{index:M,id:se,type:me,function:X,...Pi}of C){let le=(p=(o=I.message.tool_calls)[M])!=null?p:o[M]={};Object.assign(le,Pi),se&&(le.id=se),me&&(le.type=me),X&&((k=le.function)!=null||(le.function={name:(w=X.name)!=null?w:"",arguments:""})),X!=null&&X.name&&(le.function.name=X.name),X!=null&&X.arguments&&(le.function.arguments+=X.arguments,qs(u(this,xe,"f"),le)&&(le.function.parsed_arguments=es(le.function.arguments)))}}}return a},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("chunk",n=>{let i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(let n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{r=!0;for(let i of t)i.reject(n);t.length=0}),this.on("error",n=>{r=!0;for(let i of t)i.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>t.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Y(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function po(s,e){let{id:t,choices:r,created:n,model:i,system_fingerprint:o,...a}=s,l={...a,id:t,choices:r.map(({message:c,finish_reason:A,index:h,logprobs:m,...p})=>{var U,P,I;if(!A)throw new y(`missing finish_reason for choice ${h}`);let{content:w=null,function_call:k,tool_calls:b,...T}=c,E=c.role;if(!E)throw new y(`missing role for choice ${h}`);if(k){let{arguments:N,name:S}=k;if(N==null)throw new y(`missing function_call.arguments for choice ${h}`);if(!S)throw new y(`missing function_call.name for choice ${h}`);return{...p,message:{content:w,function_call:{arguments:N,name:S},role:E,refusal:(U=c.refusal)!=null?U:null},finish_reason:A,index:h,logprobs:m}}return b?{...p,index:h,finish_reason:A,logprobs:m,message:{...T,role:E,content:w,refusal:(P=c.refusal)!=null?P:null,tool_calls:b.map((N,S)=>{let{function:O,type:v,id:C,...L}=N,{arguments:M,name:se,...me}=O||{};if(C==null)throw new y(`missing choices[${h}].tool_calls[${S}].id
${an(s)}`);if(v==null)throw new y(`missing choices[${h}].tool_calls[${S}].type
${an(s)}`);if(se==null)throw new y(`missing choices[${h}].tool_calls[${S}].function.name
${an(s)}`);if(M==null)throw new y(`missing choices[${h}].tool_calls[${S}].function.arguments
${an(s)}`);return{...L,id:C,type:v,function:{...me,name:se,arguments:M}}})}}:{...p,message:{...T,content:w,role:E,refusal:(I=c.refusal)!=null?I:null},finish_reason:A,index:h,logprobs:m}}),created:n,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Js(l,e)}function an(s){return JSON.stringify(s)}var Me=class extends fe{static fromReadableStream(e){let t=new Me(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){let n=new Me(t),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}};var Ie=class extends d{constructor(){super(...arguments),this.messages=new He(this._client)}create(e,t){var r;return this._client.post("/chat/completions",{body:e,...t,stream:(r=e.stream)!=null?r:!1})}retrieve(e,t){return this._client.get(f`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(f`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",_,{query:e,...t})}delete(e,t){return this._client.delete(f`/chat/completions/${e}`,t)}parse(e,t){return Hs(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Ir(r,e))}runTools(e,t){return e.stream?Me.runTools(this._client,e,t):Ye.runTools(this._client,e,t)}stream(e,t){return fe.createChatCompletion(this._client,e,t)}};Ie.Messages=He;var Be=class extends d{constructor(){super(...arguments),this.completions=new Ie(this._client)}};Be.Completions=Ie;var Xs=Symbol("brand.privateNullableHeaders");function*go(s){if(!s)return;if(Xs in s){let{values:r,nulls:n}=s;yield*r.entries();for(let i of n)yield[i,null];return}let e=!1,t;s instanceof Headers?t=s.entries():_n(s)?t=s:(e=!0,t=Object.entries(s!=null?s:{}));for(let r of t){let n=r[0];if(typeof n!="string")throw new TypeError("expected header name to be a string");let i=_n(r[1])?r[1]:[r[1]],o=!1;for(let a of i)a!==void 0&&(e&&!o&&(o=!0,yield[n,null]),yield[n,a])}}var g=s=>{let e=new Headers,t=new Set;for(let r of s){let n=new Set;for(let[i,o]of go(r)){let a=i.toLowerCase();n.has(a)||(e.delete(i),n.add(a)),o===null?(e.delete(i),t.add(a)):(e.append(i,o),t.delete(a))}}return{[Xs]:!0,values:e,nulls:t}};var Mt=class extends d{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:g([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}};var Bt=class extends d{create(e,t){var r;return this._client.post("/audio/transcriptions",te({body:e,...t,stream:(r=e.stream)!=null?r:!1,__metadata:{model:e.model}},this._client))}};var jt=class extends d{create(e,t){return this._client.post("/audio/translations",te({body:e,...t,__metadata:{model:e.model}},this._client))}};var de=class extends d{constructor(){super(...arguments),this.transcriptions=new Bt(this._client),this.translations=new jt(this._client),this.speech=new Mt(this._client)}};de.Transcriptions=Bt;de.Translations=jt;de.Speech=Mt;var We=class extends d{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(f`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",_,{query:e,...t})}cancel(e,t){return this._client.post(f`/batches/${e}/cancel`,t)}};var Ft=class extends d{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(f`/assistants/${e}`,{...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(f`/assistants/${e}`,{body:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},t){return this._client.getAPIList("/assistants",_,{query:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(f`/assistants/${e}`,{...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};var Lt=class extends d{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};var Ut=class extends d{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};var je=class extends d{constructor(){super(...arguments),this.sessions=new Lt(this._client),this.transcriptionSessions=new Ut(this._client)}};je.Sessions=Lt;je.TranscriptionSessions=Ut;var Nt=class extends d{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:g([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}cancel(e,t){return this._client.post(f`/chatkit/sessions/${e}/cancel`,{...t,headers:g([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}};var zt=class extends d{retrieve(e,t){return this._client.get(f`/chatkit/threads/${e}`,{...t,headers:g([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",ye,{query:e,...t,headers:g([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(f`/chatkit/threads/${e}`,{...t,headers:g([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}listItems(e,t={},r){return this._client.getAPIList(f`/chatkit/threads/${e}/items`,ye,{query:t,...r,headers:g([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};var Fe=class extends d{constructor(){super(...arguments),this.sessions=new Nt(this._client),this.threads=new zt(this._client)}};Fe.Sessions=Nt;Fe.Threads=zt;var Kt=class extends d{create(e,t,r){return this._client.post(f`/threads/${e}/messages`,{body:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){let{thread_id:n}=t;return this._client.get(f`/threads/${n}/messages/${e}`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){let{thread_id:n,...i}=t;return this._client.post(f`/threads/${n}/messages/${e}`,{body:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(f`/threads/${e}/messages`,_,{query:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t,r){let{thread_id:n}=t;return this._client.delete(f`/threads/${n}/messages/${e}`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var Qt=class extends d{retrieve(e,t,r){let{thread_id:n,run_id:i,...o}=t;return this._client.get(f`/threads/${n}/runs/${i}/steps/${e}`,{query:o,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t,r){let{thread_id:n,...i}=t;return this._client.getAPIList(f`/threads/${n}/runs/${e}/steps`,_,{query:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var $s=s=>{if(typeof Buffer!="undefined"){let e=Buffer.from(s,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(s),t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return Array.from(new Float32Array(r.buffer))}};var Le=s=>{var e,t,r,n,i,o;if(typeof globalThis.process!="undefined")return(r=(t=(e=globalThis.process.env)==null?void 0:e[s])==null?void 0:t.trim())!=null?r:void 0;if(typeof globalThis.Deno!="undefined")return(o=(i=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:i.call(n,s))==null?void 0:o.trim()};var H,Ve,os,pe,ln,ie,Xe,Jt,Ze,An,re,cn,un,vr,Cr,Sr,ei,ti,ri,ni,si,ii,oi,ke=class extends Te{constructor(){super(...arguments),H.add(this),os.set(this,[]),pe.set(this,{}),ln.set(this,{}),ie.set(this,void 0),Xe.set(this,void 0),Jt.set(this,void 0),Ze.set(this,void 0),An.set(this,void 0),re.set(this,void 0),cn.set(this,void 0),un.set(this,void 0),vr.set(this,void 0)}[(os=new WeakMap,pe=new WeakMap,ln=new WeakMap,ie=new WeakMap,Xe=new WeakMap,Jt=new WeakMap,Ze=new WeakMap,An=new WeakMap,re=new WeakMap,cn=new WeakMap,un=new WeakMap,vr=new WeakMap,H=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",n=>{let i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(let n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{r=!0;for(let i of t)i.reject(n);t.length=0}),this.on("error",n=>{r=!0;for(let i of t)i.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>t.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new Ve;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var i;let r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let n=Y.fromReadableStream(e,this.controller);for await(let o of n)u(this,H,"m",Cr).call(this,o);if((i=n.controller.signal)!=null&&i.aborted)throw new Q;return this._addRun(u(this,H,"m",Sr).call(this))}toReadableStream(){return new Y(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n){let i=new Ve;return i._run(()=>i._runToolAssistantStream(e,t,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,r,n){var l;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o={...r,stream:!0},a=await e.submitToolOutputs(t,o,{...n,signal:this.controller.signal});this._connected();for await(let c of a)u(this,H,"m",Cr).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new Q;return this._addRun(u(this,H,"m",Sr).call(this))}static createThreadAssistantStream(e,t,r){let n=new Ve;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){let i=new Ve;return i._run(()=>i._runAssistantStream(e,t,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return u(this,cn,"f")}currentRun(){return u(this,un,"f")}currentMessageSnapshot(){return u(this,ie,"f")}currentRunStepSnapshot(){return u(this,vr,"f")}async finalRunSteps(){return await this.done(),Object.values(u(this,pe,"f"))}async finalMessages(){return await this.done(),Object.values(u(this,ln,"f"))}async finalRun(){if(await this.done(),!u(this,Xe,"f"))throw Error("Final run was not received.");return u(this,Xe,"f")}async _createThreadAssistantStream(e,t,r){var a;let n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));let i={...t,stream:!0},o=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(let l of o)u(this,H,"m",Cr).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new Q;return this._addRun(u(this,H,"m",Sr).call(this))}async _createAssistantStream(e,t,r,n){var l;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o={...r,stream:!0},a=await e.create(t,o,{...n,signal:this.controller.signal});this._connected();for await(let c of a)u(this,H,"m",Cr).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new Q;return this._addRun(u(this,H,"m",Sr).call(this))}static accumulateDelta(e,t){for(let[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let i=e[r];if(i==null){e[r]=n;continue}if(r==="index"||r==="type"){e[r]=n;continue}if(typeof i=="string"&&typeof n=="string")i+=n;else if(typeof i=="number"&&typeof n=="number")i+=n;else if(fr(i)&&fr(n))i=this.accumulateDelta(i,n);else if(Array.isArray(i)&&Array.isArray(n)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...n);continue}for(let o of n){if(!fr(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);let a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);let l=i[a];l==null?i.push(o):i[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n){return await this._createToolAssistantStream(t,e,r,n)}};Ve=ke,Cr=function(e){if(!this.ended)switch(x(this,cn,e,"f"),u(this,H,"m",ri).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":u(this,H,"m",oi).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":u(this,H,"m",ti).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":u(this,H,"m",ei).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},Sr=function(){if(this.ended)throw new y("stream has ended, this shouldn't happen");if(!u(this,Xe,"f"))throw Error("Final run has not been received");return u(this,Xe,"f")},ei=function(e){let[t,r]=u(this,H,"m",si).call(this,e,u(this,ie,"f"));x(this,ie,t,"f"),u(this,ln,"f")[t.id]=t;for(let n of r){let i=t.content[n.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let n of e.data.delta.content){if(n.type=="text"&&n.text){let i=n.text,o=t.content[n.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=u(this,Jt,"f")){if(u(this,Ze,"f"))switch(u(this,Ze,"f").type){case"text":this._emit("textDone",u(this,Ze,"f").text,u(this,ie,"f"));break;case"image_file":this._emit("imageFileDone",u(this,Ze,"f").image_file,u(this,ie,"f"));break}x(this,Jt,n.index,"f")}x(this,Ze,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(u(this,Jt,"f")!==void 0){let n=e.data.content[u(this,Jt,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,u(this,ie,"f"));break;case"text":this._emit("textDone",n.text,u(this,ie,"f"));break}}u(this,ie,"f")&&this._emit("messageDone",e.data),x(this,ie,void 0,"f")}},ti=function(e){let t=u(this,H,"m",ni).call(this,e);switch(x(this,vr,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(let i of r.step_details.tool_calls)i.index==u(this,An,"f")?this._emit("toolCallDelta",i,t.step_details.tool_calls[i.index]):(u(this,re,"f")&&this._emit("toolCallDone",u(this,re,"f")),x(this,An,i.index,"f"),x(this,re,t.step_details.tool_calls[i.index],"f"),u(this,re,"f")&&this._emit("toolCallCreated",u(this,re,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":x(this,vr,void 0,"f"),e.data.step_details.type=="tool_calls"&&u(this,re,"f")&&(this._emit("toolCallDone",u(this,re,"f")),x(this,re,void 0,"f")),this._emit("runStepDone",e.data,t);break;case"thread.run.step.in_progress":break}},ri=function(e){u(this,os,"f").push(e),this._emit("event",e)},ni=function(e){switch(e.event){case"thread.run.step.created":return u(this,pe,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=u(this,pe,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){let n=Ve.accumulateDelta(t,r.delta);u(this,pe,"f")[e.data.id]=n}return u(this,pe,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":u(this,pe,"f")[e.data.id]=e.data;break}if(u(this,pe,"f")[e.data.id])return u(this,pe,"f")[e.data.id];throw new Error("No snapshot available")},si=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(let i of n.delta.content)if(i.index in t.content){let o=t.content[i.index];t.content[i.index]=u(this,H,"m",ii).call(this,i,o)}else t.content[i.index]=i,r.push(i);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ii=function(e,t){return Ve.accumulateDelta(t,e)},oi=function(e){switch(x(this,un,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":x(this,Xe,e.data,"f"),u(this,re,"f")&&(this._emit("toolCallDone",u(this,re,"f")),x(this,re,void 0,"f"));break;case"thread.run.cancelling":break}};var $e=class extends d{constructor(){super(...arguments),this.steps=new Qt(this._client)}create(e,t,r){var o;let{include:n,...i}=t;return this._client.post(f`/threads/${e}/runs`,{query:{include:n},body:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(o=t.stream)!=null?o:!1})}retrieve(e,t,r){let{thread_id:n}=t;return this._client.get(f`/threads/${n}/runs/${e}`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){let{thread_id:n,...i}=t;return this._client.post(f`/threads/${n}/runs/${e}`,{body:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(f`/threads/${e}/runs`,_,{query:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,t,r){let{thread_id:n}=t;return this._client.post(f`/threads/${n}/runs/${e}/cancel`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(n.id,{thread_id:e},r)}createAndStream(e,t,r){return ke.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){var i,o;let n=g([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?o:void 0}]);for(;;){let{data:a,response:l}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{let A=l.headers.get("openai-poll-after-ms");if(A){let h=parseInt(A);isNaN(h)||(c=h)}}await ue(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return ke.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){var o;let{thread_id:n,...i}=t;return this._client.post(f`/threads/${n}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(o=t.stream)!=null?o:!1})}async submitToolOutputsAndPoll(e,t,r){let n=await this.submitToolOutputs(e,t,r);return await this.poll(n.id,t,r)}submitToolOutputsStream(e,t,r){return ke.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}};$e.Steps=Qt;var Ue=class extends d{constructor(){super(...arguments),this.runs=new $e(this._client),this.messages=new Kt(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(f`/threads/${e}`,{...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(f`/threads/${e}`,{body:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t){return this._client.delete(f`/threads/${e}`,{...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){var r;return this._client.post("/threads/runs",{body:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:(r=e.stream)!=null?r:!1})}async createAndRunPoll(e,t){let r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return ke.createThreadAssistantStream(e,this._client.beta.threads,t)}};Ue.Runs=$e;Ue.Messages=Kt;var oe=class extends d{constructor(){super(...arguments),this.realtime=new je(this._client),this.chatkit=new Fe(this._client),this.assistants=new Ft(this._client),this.threads=new Ue(this._client)}};oe.Realtime=je;oe.ChatKit=Fe;oe.Assistants=Ft;oe.Threads=Ue;var et=class extends d{create(e,t){var r;return this._client.post("/completions",{body:e,...t,stream:(r=e.stream)!=null?r:!1})}};var qt=class extends d{retrieve(e,t,r){let{container_id:n}=t;return this._client.get(f`/containers/${n}/files/${e}/content`,{...r,headers:g([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}};var tt=class extends d{constructor(){super(...arguments),this.content=new qt(this._client)}create(e,t,r){return this._client.post(f`/containers/${e}/files`,te({body:t,...r},this._client))}retrieve(e,t,r){let{container_id:n}=t;return this._client.get(f`/containers/${n}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(f`/containers/${e}/files`,_,{query:t,...r})}delete(e,t,r){let{container_id:n}=t;return this._client.delete(f`/containers/${n}/files/${e}`,{...r,headers:g([{Accept:"*/*"},r==null?void 0:r.headers])})}};tt.Content=qt;var Ne=class extends d{constructor(){super(...arguments),this.files=new tt(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(f`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",_,{query:e,...t})}delete(e,t){return this._client.delete(f`/containers/${e}`,{...t,headers:g([{Accept:"*/*"},t==null?void 0:t.headers])})}};Ne.Files=tt;var Dt=class extends d{create(e,t,r){let{include:n,...i}=t;return this._client.post(f`/conversations/${e}/items`,{query:{include:n},body:i,...r})}retrieve(e,t,r){let{conversation_id:n,...i}=t;return this._client.get(f`/conversations/${n}/items/${e}`,{query:i,...r})}list(e,t={},r){return this._client.getAPIList(f`/conversations/${e}/items`,ye,{query:t,...r})}delete(e,t,r){let{conversation_id:n}=t;return this._client.delete(f`/conversations/${n}/items/${e}`,r)}};var ze=class extends d{constructor(){super(...arguments),this.items=new Dt(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(f`/conversations/${e}`,t)}update(e,t,r){return this._client.post(f`/conversations/${e}`,{body:t,...r})}delete(e,t){return this._client.delete(f`/conversations/${e}`,t)}};ze.Items=Dt;var rt=class extends d{create(e,t){let r=!!e.encoding_format,n=r?e.encoding_format:"base64";r&&K(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let i=this._client.post("/embeddings",{body:{...e,encoding_format:n},...t});return r?i:(K(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{let l=a.embedding;a.embedding=$s(l)}),o)))}};var Ht=class extends d{retrieve(e,t,r){let{eval_id:n,run_id:i}=t;return this._client.get(f`/evals/${n}/runs/${i}/output_items/${e}`,r)}list(e,t,r){let{eval_id:n,...i}=t;return this._client.getAPIList(f`/evals/${n}/runs/${e}/output_items`,_,{query:i,...r})}};var nt=class extends d{constructor(){super(...arguments),this.outputItems=new Ht(this._client)}create(e,t,r){return this._client.post(f`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){let{eval_id:n}=t;return this._client.get(f`/evals/${n}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(f`/evals/${e}/runs`,_,{query:t,...r})}delete(e,t,r){let{eval_id:n}=t;return this._client.delete(f`/evals/${n}/runs/${e}`,r)}cancel(e,t,r){let{eval_id:n}=t;return this._client.post(f`/evals/${n}/runs/${e}`,r)}};nt.OutputItems=Ht;var Ke=class extends d{constructor(){super(...arguments),this.runs=new nt(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(f`/evals/${e}`,t)}update(e,t,r){return this._client.post(f`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",_,{query:e,...t})}delete(e,t){return this._client.delete(f`/evals/${e}`,t)}};Ke.Runs=nt;var st=class extends d{create(e,t){return this._client.post("/files",te({body:e,...t},this._client))}retrieve(e,t){return this._client.get(f`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",_,{query:e,...t})}delete(e,t){return this._client.delete(f`/files/${e}`,t)}content(e,t){return this._client.get(f`/files/${e}/content`,{...t,headers:g([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){let n=new Set(["processed","error","deleted"]),i=Date.now(),o=await this.retrieve(e);for(;!o.status||!n.has(o.status);)if(await ue(t),o=await this.retrieve(e),Date.now()-i>r)throw new ve({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};var Gt=class extends d{};var Yt=class extends d{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};var it=class extends d{constructor(){super(...arguments),this.graders=new Yt(this._client)}};it.Graders=Yt;var Wt=class extends d{create(e,t,r){return this._client.getAPIList(f`/fine_tuning/checkpoints/${e}/permissions`,he,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(f`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){let{fine_tuned_model_checkpoint:n}=t;return this._client.delete(f`/fine_tuning/checkpoints/${n}/permissions/${e}`,r)}};var ot=class extends d{constructor(){super(...arguments),this.permissions=new Wt(this._client)}};ot.Permissions=Wt;var Zt=class extends d{list(e,t={},r){return this._client.getAPIList(f`/fine_tuning/jobs/${e}/checkpoints`,_,{query:t,...r})}};var at=class extends d{constructor(){super(...arguments),this.checkpoints=new Zt(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(f`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",_,{query:e,...t})}cancel(e,t){return this._client.post(f`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(f`/fine_tuning/jobs/${e}/events`,_,{query:t,...r})}pause(e,t){return this._client.post(f`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(f`/fine_tuning/jobs/${e}/resume`,t)}};at.Checkpoints=Zt;var ae=class extends d{constructor(){super(...arguments),this.methods=new Gt(this._client),this.jobs=new at(this._client),this.checkpoints=new ot(this._client),this.alpha=new it(this._client)}};ae.Methods=Gt;ae.Jobs=at;ae.Checkpoints=ot;ae.Alpha=it;var Vt=class extends d{};var Qe=class extends d{constructor(){super(...arguments),this.graderModels=new Vt(this._client)}};Qe.GraderModels=Vt;var lt=class extends d{createVariation(e,t){return this._client.post("/images/variations",te({body:e,...t},this._client))}edit(e,t){var r;return this._client.post("/images/edits",te({body:e,...t,stream:(r=e.stream)!=null?r:!1},this._client))}generate(e,t){var r;return this._client.post("/images/generations",{body:e,...t,stream:(r=e.stream)!=null?r:!1})}};var ct=class extends d{retrieve(e,t){return this._client.get(f`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",he,e)}delete(e,t){return this._client.delete(f`/models/${e}`,t)}};var ut=class extends d{create(e,t){return this._client.post("/moderations",{body:e,...t})}};var Xt=class extends d{accept(e,t,r){return this._client.post(f`/realtime/calls/${e}/accept`,{body:t,...r,headers:g([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,t){return this._client.post(f`/realtime/calls/${e}/hangup`,{...t,headers:g([{Accept:"*/*"},t==null?void 0:t.headers])})}refer(e,t,r){return this._client.post(f`/realtime/calls/${e}/refer`,{body:t,...r,headers:g([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,t={},r){return this._client.post(f`/realtime/calls/${e}/reject`,{body:t,...r,headers:g([{Accept:"*/*"},r==null?void 0:r.headers])})}};var $t=class extends d{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}};var Ee=class extends d{constructor(){super(...arguments),this.clientSecrets=new $t(this._client),this.calls=new Xt(this._client)}};Ee.ClientSecrets=$t;Ee.Calls=Xt;function ai(s,e){return!e||!Yo(e)?{...s,output_parsed:null,output:s.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:as(s,e)}function as(s,e){let t=s.output.map(n=>{if(n.type==="function_call")return{...n,parsed_arguments:Vo(e,n)};if(n.type==="message"){let i=n.content.map(o=>o.type==="output_text"?{...o,parsed:Go(e,o.text)}:o);return{...n,content:i}}return n}),r=Object.assign({},s,{output:t});return Object.getOwnPropertyDescriptor(s,"output_text")||hn(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(let n of r.output)if(n.type==="message"){for(let i of n.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function Go(s,e){var t,r,n,i;return((r=(t=s.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((n=s.text)==null?void 0:n.format)?((i=s.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function Yo(s){var e;return!!xr((e=s.text)==null?void 0:e.format)}function Wo(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function Zo(s,e){return s.find(t=>t.type==="function"&&t.name===e)}function Vo(s,e){var r;let t=Zo((r=s.tools)!=null?r:[],e.name);return{...e,...e,parsed_arguments:Wo(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function hn(s){let e=[];for(let t of s.output)if(t.type==="message")for(let r of t.content)r.type==="output_text"&&e.push(r.text);s.output_text=e.join("")}var er,fn,Je,dn,li,ci,ui,Ai,tr=class extends Te{constructor(e){super(),er.add(this),fn.set(this,void 0),Je.set(this,void 0),dn.set(this,void 0),x(this,fn,e,"f")}static createResponse(e,t,r){let n=new tr(t);return n._run(()=>n._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,t,r){var a,l;let n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),u(this,er,"m",li).call(this);let i,o=null;"response_id"in t?(i=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=(a=t.starting_after)!=null?a:null):i=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(let c of i)u(this,er,"m",ci).call(this,c,o);if((l=i.controller.signal)!=null&&l.aborted)throw new Q;return u(this,er,"m",ui).call(this)}[(fn=new WeakMap,Je=new WeakMap,dn=new WeakMap,er=new WeakSet,li=function(){this.ended||x(this,Je,void 0,"f")},ci=function(t,r){if(this.ended)return;let n=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},i=u(this,er,"m",Ai).call(this,t);switch(n("event",t),t.type){case"response.output_text.delta":{let o=i.output[t.output_index];if(!o)throw new y(`missing output at index ${t.output_index}`);if(o.type==="message"){let a=o.content[t.content_index];if(!a)throw new y(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new y(`expected content to be 'output_text', got ${a.type}`);n("response.output_text.delta",{...t,snapshot:a.text})}break}case"response.function_call_arguments.delta":{let o=i.output[t.output_index];if(!o)throw new y(`missing output at index ${t.output_index}`);o.type==="function_call"&&n("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:n(t.type,t);break}},ui=function(){if(this.ended)throw new y("stream has ended, this shouldn't happen");let t=u(this,Je,"f");if(!t)throw new y("request ended without sending any events");x(this,Je,void 0,"f");let r=Xo(t,u(this,fn,"f"));return x(this,dn,r,"f"),r},Ai=function(t){var n;let r=u(this,Je,"f");if(!r){if(t.type!=="response.created")throw new y(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=x(this,Je,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{let i=r.output[t.output_index];if(!i)throw new y(`missing output at index ${t.output_index}`);let o=i.type,a=t.part;o==="message"&&a.type!=="reasoning_text"?i.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(a));break}case"response.output_text.delta":{let i=r.output[t.output_index];if(!i)throw new y(`missing output at index ${t.output_index}`);if(i.type==="message"){let o=i.content[t.content_index];if(!o)throw new y(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new y(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{let i=r.output[t.output_index];if(!i)throw new y(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.reasoning_text.delta":{let i=r.output[t.output_index];if(!i)throw new y(`missing output at index ${t.output_index}`);if(i.type==="reasoning"){let o=(n=i.content)==null?void 0:n[t.content_index];if(!o)throw new y(`missing content at index ${t.content_index}`);if(o.type!=="reasoning_text")throw new y(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=t.delta}break}case"response.completed":{x(this,Je,t.response,"f");break}}return r},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",n=>{let i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(let n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{r=!0;for(let i of t)i.reject(n);t.length=0}),this.on("error",n=>{r=!0;for(let i of t)i.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>t.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=u(this,dn,"f");if(!e)throw new y("stream ended without producing a ChatCompletion");return e}};function Xo(s,e){return ai(s,e)}var rr=class extends d{list(e,t={},r){return this._client.getAPIList(f`/responses/${e}/input_items`,_,{query:t,...r})}};var nr=class extends d{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}};var Re=class extends d{constructor(){super(...arguments),this.inputItems=new rr(this._client),this.inputTokens=new nr(this._client)}create(e,t){var r;return this._client.post("/responses",{body:e,...t,stream:(r=e.stream)!=null?r:!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&hn(n),n))}retrieve(e,t={},r){var n;return this._client.get(f`/responses/${e}`,{query:t,...r,stream:(n=t==null?void 0:t.stream)!=null?n:!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&hn(i),i))}delete(e,t){return this._client.delete(f`/responses/${e}`,{...t,headers:g([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>as(r,e))}stream(e,t){return tr.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(f`/responses/${e}/cancel`,t)}};Re.InputItems=rr;Re.InputTokens=nr;var sr=class extends d{create(e,t,r){return this._client.post(f`/uploads/${e}/parts`,te({body:t,...r},this._client))}};var qe=class extends d{constructor(){super(...arguments),this.parts=new sr(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(f`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(f`/uploads/${e}/complete`,{body:t,...r})}};qe.Parts=sr;var hi=async s=>{let e=await Promise.allSettled(s),t=e.filter(n=>n.status==="rejected");if(t.length){for(let n of t)console.error(n.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}let r=[];for(let n of e)n.status==="fulfilled"&&r.push(n.value);return r};var ir=class extends d{create(e,t,r){return this._client.post(f`/vector_stores/${e}/file_batches`,{body:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){let{vector_store_id:n}=t;return this._client.get(f`/vector_stores/${n}/file_batches/${e}`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,t,r){let{vector_store_id:n}=t;return this._client.post(f`/vector_stores/${n}/file_batches/${e}/cancel`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){let n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r){let{vector_store_id:n,...i}=t;return this._client.getAPIList(f`/vector_stores/${n}/file_batches/${e}/files`,_,{query:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,t,r){var i,o;let n=g([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?o:void 0}]);for(;;){let{data:a,response:l}=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{let A=l.headers.get("openai-poll-after-ms");if(A){let h=parseInt(A);isNaN(h)||(c=h)}}await ue(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){var m;if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=(m=n==null?void 0:n.maxConcurrency)!=null?m:5,o=Math.min(i,t.length),a=this._client,l=t.values(),c=[...r];async function A(p){for(let w of p){let k=await a.files.create({file:w,purpose:"assistants"},n);c.push(k.id)}}let h=Array(o).fill(l).map(A);return await hi(h),await this.createAndPoll(e,{file_ids:c})}};var or=class extends d{create(e,t,r){return this._client.post(f`/vector_stores/${e}/files`,{body:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){let{vector_store_id:n}=t;return this._client.get(f`/vector_stores/${n}/files/${e}`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){let{vector_store_id:n,...i}=t;return this._client.post(f`/vector_stores/${n}/files/${e}`,{body:i,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(f`/vector_stores/${e}/files`,_,{query:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t,r){let{vector_store_id:n}=t;return this._client.delete(f`/vector_stores/${n}/files/${e}`,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){var i,o;let n=g([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?o:void 0}]);for(;;){let a=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{let A=a.response.headers.get("openai-poll-after-ms");if(A){let h=parseInt(A);isNaN(h)||(c=h)}}await ue(c);break;case"failed":case"completed":return l}}}async upload(e,t,r){let n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){let n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}content(e,t,r){let{vector_store_id:n}=t;return this._client.getAPIList(f`/vector_stores/${n}/files/${e}/content`,he,{...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var _e=class extends d{constructor(){super(...arguments),this.files=new or(this._client),this.fileBatches=new ir(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(f`/vector_stores/${e}`,{...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(f`/vector_stores/${e}`,{body:t,...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",_,{query:e,...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(f`/vector_stores/${e}`,{...t,headers:g([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,r){return this._client.getAPIList(f`/vector_stores/${e}/search`,he,{body:t,method:"post",...r,headers:g([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};_e.Files=or;_e.FileBatches=ir;var At=class extends d{create(e,t){return this._client.post("/videos",Jn({body:e,...t},this._client))}retrieve(e,t){return this._client.get(f`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",ye,{query:e,...t})}delete(e,t){return this._client.delete(f`/videos/${e}`,t)}downloadContent(e,t={},r){return this._client.get(f`/videos/${e}/content`,{query:t,...r,headers:g([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,t,r){return this._client.post(f`/videos/${e}/remix`,Jn({body:t,...r},this._client))}};var ar,fi,pn,ht=class extends d{constructor(){super(...arguments),ar.add(this)}async unwrap(e,t,r=this._client.webhookSecret,n=300){return await this.verifySignature(e,t,r,n),JSON.parse(e)}async verifySignature(e,t,r=this._client.webhookSecret,n=300){if(typeof crypto=="undefined"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");u(this,ar,"m",fi).call(this,r);let i=g([t]).values,o=u(this,ar,"m",pn).call(this,i,"webhook-signature"),a=u(this,ar,"m",pn).call(this,i,"webhook-timestamp"),l=u(this,ar,"m",pn).call(this,i,"webhook-id"),c=parseInt(a,10);if(isNaN(c))throw new ce("Invalid webhook timestamp format");let A=Math.floor(Date.now()/1e3);if(A-c>n)throw new ce("Webhook timestamp is too old");if(c>A+n)throw new ce("Webhook timestamp is too new");let h=o.split(" ").map(k=>k.startsWith("v1,")?k.substring(3):k),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${a}.${e}`:`${a}.${e}`,w=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let k of h)try{let b=Buffer.from(k,"base64");if(await crypto.subtle.verify("HMAC",w,b,new TextEncoder().encode(p)))return}catch(b){continue}throw new ce("The given webhook signature does not match the expected signature")}};ar=new WeakSet,fi=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},pn=function(e,t){if(!e)throw new Error("Headers are required");let r=e.get(t);if(r==null)throw new Error(`Missing required header: ${t}`);return r};var ls,cs,mn,di,R=class{constructor({baseURL:e=Le("OPENAI_BASE_URL"),apiKey:t=Le("OPENAI_API_KEY"),organization:r=(a=>(a=Le("OPENAI_ORG_ID"))!=null?a:null)(),project:n=(l=>(l=Le("OPENAI_PROJECT_ID"))!=null?l:null)(),webhookSecret:i=(c=>(c=Le("OPENAI_WEBHOOK_SECRET"))!=null?c:null)(),...o}={}){var m,p,w,k,b,T;if(ls.add(this),mn.set(this,void 0),this.completions=new et(this),this.chat=new Be(this),this.embeddings=new rt(this),this.files=new st(this),this.images=new lt(this),this.audio=new de(this),this.moderations=new ut(this),this.models=new ct(this),this.fineTuning=new ae(this),this.graders=new Qe(this),this.vectorStores=new _e(this),this.webhooks=new ht(this),this.beta=new oe(this),this.batches=new We(this),this.uploads=new qe(this),this.responses=new Re(this),this.realtime=new Ee(this),this.conversations=new ze(this),this.evals=new Ke(this),this.containers=new Ne(this),this.videos=new At(this),t===void 0)throw new y("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let A={apiKey:t,organization:r,project:n,webhookSecret:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!A.dangerouslyAllowBrowser&&Es())throw new y(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=A.baseURL,this.timeout=(m=A.timeout)!=null?m:cs.DEFAULT_TIMEOUT,this.logger=(p=A.logger)!=null?p:console;let h="warn";this.logLevel=h,this.logLevel=(k=(w=Ln(A.logLevel,"ClientOptions.logLevel",this))!=null?w:Ln(Le("OPENAI_LOG"),"process.env['OPENAI_LOG']",this))!=null?k:h,this.fetchOptions=A.fetchOptions,this.maxRetries=(b=A.maxRetries)!=null?b:2,this.fetch=(T=A.fetch)!=null?T:_s(),x(this,mn,Ss,"f"),this._options=A,this.apiKey=typeof t=="string"?t:"Missing Key",this.organization=r,this.project=n,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return g([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return jn(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Pe}`}defaultIdempotencyKey(){return`stainless-node-retry-${Rn()}`}makeStatusError(e,t,r,n){return z.generate(e,t,r,n)}async _callApiKey(){let e=this._options.apiKey;if(typeof e!="function")return!1;let t;try{t=await e()}catch(r){throw r instanceof y?r:new y(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof t!="string"||!t)throw new y(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,r){let n=!u(this,ls,"m",di).call(this)&&r||this.baseURL,i=gs(e)?new URL(e):new URL(n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return ws(o)||(t={...o,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(n=>({method:e,path:t,...n})))}request(e,t=null){return new we(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var T,E,U;let n=await e,i=(T=n.maxRetries)!=null?T:this.maxRetries;t==null&&(t=i),await this.prepareOptions(n);let{req:o,url:a,timeout:l}=await this.buildRequest(n,{retryCount:i-t});await this.prepareRequest(o,{url:a,options:n});let c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=r===void 0?"":`, retryOf: ${r}`,h=Date.now();if(K(this).debug(`[${c}] sending request`,ge({retryOfRequestLogID:r,method:n.method,url:a,options:n,headers:o.headers})),(E=n.signal)!=null&&E.aborted)throw new Q;let m=new AbortController,p=await this.fetchWithTimeout(a,o,l,m).catch(hr),w=Date.now();if(p instanceof globalThis.Error){let P=`retrying, ${t} attempts remaining`;if((U=n.signal)!=null&&U.aborted)throw new Q;let I=Ar(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(t)return K(this).info(`[${c}] connection ${I?"timed out":"failed"} - ${P}`),K(this).debug(`[${c}] connection ${I?"timed out":"failed"} (${P})`,ge({retryOfRequestLogID:r,url:a,durationMs:w-h,message:p.message})),this.retryRequest(n,t,r!=null?r:c);throw K(this).info(`[${c}] connection ${I?"timed out":"failed"} - error; no more retries left`),K(this).debug(`[${c}] connection ${I?"timed out":"failed"} (error; no more retries left)`,ge({retryOfRequestLogID:r,url:a,durationMs:w-h,message:p.message})),I?new ve:new Se({cause:p})}let k=[...p.headers.entries()].filter(([P])=>P==="x-request-id").map(([P,I])=>", "+P+": "+JSON.stringify(I)).join(""),b=`[${c}${A}${k}] ${o.method} ${a} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${w-h}ms`;if(!p.ok){let P=await this.shouldRetry(p);if(t&&P){let C=`retrying, ${t} attempts remaining`;return await Cs(p.body),K(this).info(`${b} - ${C}`),K(this).debug(`[${c}] response error (${C})`,ge({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:w-h})),this.retryRequest(n,t,r!=null?r:c,p.headers)}let I=P?"error; no more retries left":"error; not retryable";K(this).info(`${b} - ${I}`);let N=await p.text().catch(C=>hr(C).message),S=xs(N),O=S?void 0:N;throw K(this).debug(`[${c}] response error (${I})`,ge({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:O,durationMs:Date.now()-h})),this.makeStatusError(p.status,S,O,p.headers)}return K(this).info(b),K(this).debug(`[${c}] response start`,ge({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:w-h})),{response:p,options:n,controller:m,requestLogID:c,retryOfRequestLogID:r,startTime:h}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){let r=this.makeRequest(t,null,void 0);return new wr(this,r,e)}async fetchWithTimeout(e,t,r,n){let{signal:i,method:o,...a}=t||{};i&&i.addEventListener("abort",()=>n.abort());let l=setTimeout(()=>n.abort(),r),c=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,A={signal:n.signal,...c?{duplex:"half"}:{},method:"GET",...a};o&&(A.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,A)}finally{clearTimeout(l)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,n){var l;let i,o=n==null?void 0:n.get("retry-after-ms");if(o){let c=parseFloat(o);Number.isNaN(c)||(i=c)}let a=n==null?void 0:n.get("retry-after");if(a&&!i){let c=parseFloat(a);Number.isNaN(c)?i=Date.parse(a)-Date.now():i=c*1e3}if(!(i&&0<=i&&i<60*1e3)){let c=(l=e.maxRetries)!=null?l:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,c)}return await ue(i),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){let i=t-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:t=0}={}){var p,w,k;let r={...e},{method:n,path:i,query:o,defaultBaseURL:a}=r,l=this.buildURL(i,o,a);"timeout"in r&&bs("timeout",r.timeout),r.timeout=(p=r.timeout)!=null?p:this.timeout;let{bodyHeaders:c,body:A}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:n,bodyHeaders:c,retryCount:t});return{req:{method:n,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"},...A&&{body:A},...(w=this.fetchOptions)!=null?w:{},...(k=r.fetchOptions)!=null?k:{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:n}){let i={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let o=g([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Rs(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=g([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Nr(e)}:u(this,mn,"f").call(this,{body:e,headers:r})}};cs=R,mn=new WeakMap,ls=new WeakSet,di=function(){return this.baseURL!=="https://api.openai.com/v1"};R.OpenAI=cs;R.DEFAULT_TIMEOUT=6e5;R.OpenAIError=y;R.APIError=z;R.APIConnectionError=Se;R.APIConnectionTimeoutError=ve;R.APIUserAbortError=Q;R.NotFoundError=bt;R.ConflictError=xt;R.RateLimitError=kt;R.BadRequestError=gt;R.AuthenticationError=wt;R.InternalServerError=Et;R.PermissionDeniedError=yt;R.UnprocessableEntityError=It;R.InvalidWebhookSignatureError=ce;R.toFile=Vr;R.Completions=et;R.Chat=Be;R.Embeddings=rt;R.Files=st;R.Images=lt;R.Audio=de;R.Moderations=ut;R.Models=ct;R.FineTuning=ae;R.Graders=Qe;R.VectorStores=_e;R.Webhooks=ht;R.Beta=oe;R.Batches=We;R.Uploads=qe;R.Responses=Re;R.Realtime=Ee;R.Conversations=ze;R.Evals=Ke;R.Containers=Ne;R.Videos=At;var gn=class{constructor(e,t,r,n){this.plugin=e,this.openai=new R({baseURL:this.plugin.settings.baseURL,apiKey:this.plugin.settings.apiKey,dangerouslyAllowBrowser:!0}),this.onResult=t,this.onFinish=r,this.onError=n,this.cancel=!1}async askAI(e,t){var r,n;if(e!==""){this.cancel=!1,t&&(e=`Based on the following text: ${e}

${t}`);try{let i=await this.openai.chat.completions.create({model:this.plugin.settings.model,messages:[{role:"system",content:"You are a helpful assistant"},{role:"user",content:e}],max_tokens:this.plugin.settings.maxTokens,stream:!0});for await(let o of i){if(this.cancel)break;let a=((n=(r=o.choices[0])==null?void 0:r.delta)==null?void 0:n.content)||"";this.onResult&&(console.log(a),this.onResult(a))}this.onFinish&&this.onFinish()}catch(i){console.error("Error occurred during AI request:",i),this.onError&&this.onError(i.message)}}}};function As(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var pt=As();function bi(s){pt=s}var xi=/[&<>"']/,ia=new RegExp(xi.source,"g"),Ii=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,oa=new RegExp(Ii.source,"g"),aa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pi=s=>aa[s];function ne(s,e){if(e){if(xi.test(s))return s.replace(ia,pi)}else if(Ii.test(s))return s.replace(oa,pi);return s}var la=/(^|[^\[])\^/g;function j(s,e){let t=typeof s=="string"?s:s.source;e=e||"";let r={replace:(n,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(la,"$1"),t=t.replace(n,o),r},getRegex:()=>new RegExp(t,e)};return r}function mi(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch(e){return null}return s}var Or={exec:()=>null};function gi(s,e){let t=s.replace(/\|/g,(i,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(/\\\|/g,"|");return r}function Pr(s,e,t){let r=s.length;if(r===0)return"";let n=0;for(;n<r;){let i=s.charAt(r-n-1);if(i===e&&!t)n++;else if(i!==e&&t)n++;else break}return s.slice(0,r-n)}function ca(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<s.length;r++)if(s[r]==="\\")r++;else if(s[r]===e[0])t++;else if(s[r]===e[1]&&(t--,t<0))return r;return-1}function wi(s,e,t,r){let n=e.href,i=e.title?ne(e.title):null,o=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:n,title:i,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:n,title:i,text:ne(o)}}function ua(s,e){let t=s.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(n=>{let i=n.match(/^\s+/);if(i===null)return n;let[o]=i;return o.length>=r.length?n.slice(r.length):n}).join(`
`)}var lr=class{constructor(e){F(this,"options");F(this,"rules");F(this,"lexer");this.options=e||pt}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Pr(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],n=ua(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let n=Pr(r,"#");(this.options.pedantic||!n||/ $/.test(n))&&(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Pr(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=Pr(t[0],`
`).split(`
`),n="",i="",o=[];for(;r.length>0;){let a=!1,l=[],c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);let A=l.join(`
`),h=A.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}
${A}`:A,i=i?`${i}
${h}`:h;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=m,r.length===0)break;let p=o[o.length-1];if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){let w=p,k=w.raw+`
`+r.join(`
`),b=this.blockquote(k);o[o.length-1]=b,n=n.substring(0,n.length-w.raw.length)+b.raw,i=i.substring(0,i.length-w.text.length)+b.text;break}else if((p==null?void 0:p.type)==="list"){let w=p,k=w.raw+`
`+r.join(`
`),b=this.list(k);o[o.length-1]=b,n=n.substring(0,n.length-p.raw.length)+b.raw,i=i.substring(0,i.length-w.raw.length)+b.raw,r=k.substring(o[o.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a=!1;for(;e;){let l=!1,c="",A="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,T=>" ".repeat(3*T.length)),m=e.split(`
`,1)[0],p=!h.trim(),w=0;if(this.options.pedantic?(w=2,A=h.trimStart()):p?w=t[1].length+1:(w=t[2].search(/[^ ]/),w=w>4?1:w,A=h.slice(w),w+=t[1].length),p&&/^[ \t]*$/.test(m)&&(c+=m+`
`,e=e.substring(m.length+1),l=!0),!l){let T=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,w-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),U=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,w-1)}}#`),I=new RegExp(`^ {0,${Math.min(3,w-1)}}<[a-z].*>`,"i");for(;e;){let N=e.split(`
`,1)[0],S;if(m=N,this.options.pedantic?(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),S=m):S=m.replace(/\t/g,"    "),U.test(m)||P.test(m)||I.test(m)||T.test(m)||E.test(m))break;if(S.search(/[^ ]/)>=w||!m.trim())A+=`
`+S.slice(w);else{if(p||h.replace(/\t/g,"    ").search(/[^ ]/)>=4||U.test(h)||P.test(h)||E.test(h))break;A+=`
`+m}!p&&!m.trim()&&(p=!0),c+=N+`
`,e=e.substring(N.length+1),h=S.slice(w)}}i.loose||(a?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(c)&&(a=!0));let k=null,b;this.options.gfm&&(k=/^\[[ xX]\] /.exec(A),k&&(b=k[0]!=="[ ] ",A=A.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:c,task:!!k,checked:b,loose:!1,text:A,tokens:[]}),i.raw+=c}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(h=>h.type==="space"),A=c.length>0&&c.some(h=>/\n.*\n/.test(h.raw));i.loose=A}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:n,title:i}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=gi(t[1]),n=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let a of n)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(let a of i)o.rows.push(gi(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ne(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=Pr(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=ca(t[2],"()");if(o>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let n=t[2],i="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);o&&(n=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(r)?n=n.slice(1):n=n.slice(1,-1)),wi(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let n=(r[2]||r[1]).replace(/\s+/g," "),i=t[n.toLowerCase()];if(!i){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return wi(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!n||n[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...n[0]].length-1,a,l,c=o,A=0,h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(n=h.exec(t))!=null;){if(a=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!a)continue;if(l=[...a].length,n[3]||n[4]){c+=l;continue}else if((n[5]||n[6])&&o%3&&!((o+l)%3)){A+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+A);let m=[...n[0]][0].length,p=e.slice(0,o+n.index+m+l);if(Math.min(o,l)%2){let k=p.slice(1,-1);return{type:"em",raw:p,text:k,tokens:this.lexer.inlineTokens(k)}}let w=p.slice(2,-2);return{type:"strong",raw:p,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),n=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return n&&i&&(r=r.substring(1,r.length-1)),r=ne(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,n;return t[2]==="@"?(r=ne(t[1]),n="mailto:"+r):(r=ne(t[1]),n=r),{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r,n;let t;if(t=this.rules.inline.url.exec(e)){let i,o;if(t[2]==="@")i=ne(t[0]),o="mailto:"+i;else{let a;do a=t[0],t[0]=(n=(r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])!=null?n:"";while(a!==t[0]);i=ne(t[0]),t[1]==="www."?o="http://"+t[0]:o=t[0]}return{type:"link",raw:t[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=ne(t[0]),{type:"text",raw:t[0],text:r}}}},Aa=/^(?:[ \t]*(?:\n|$))+/,ha=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,fa=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,jr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,da=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ki=/(?:[*+-]|\d{1,9}[.)])/,Ei=j(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ki).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),hs=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,pa=/^[^\n]+/,fs=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ma=j(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",fs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ga=j(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ki).getRegex(),bn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ds=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,wa=j("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ds).replace("tag",bn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ri=j(hs).replace("hr",jr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bn).getRegex(),ya=j(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ri).getRegex(),ps={blockquote:ya,code:ha,def:ma,fences:fa,heading:da,hr:jr,html:wa,lheading:Ei,list:ga,newline:Aa,paragraph:Ri,table:Or,text:pa},yi=j("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",jr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bn).getRegex(),ba={...ps,table:yi,paragraph:j(hs).replace("hr",jr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",yi).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bn).getRegex()},xa={...ps,html:j(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ds).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Or,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:j(hs).replace("hr",jr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ei).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_i=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ia=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ci=/^( {2,}|\\)\n(?!\s*$)/,ka=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Fr="\\p{P}\\p{S}",Ea=j(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Fr).getRegex(),Ra=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,_a=j(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Fr).getRegex(),Ca=j("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Fr).getRegex(),Sa=j("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Fr).getRegex(),va=j(/\\([punct])/,"gu").replace(/punct/g,Fr).getRegex(),Pa=j(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ta=j(ds).replace("(?:-->|$)","-->").getRegex(),Oa=j("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ta).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ma=j(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",yn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Si=j(/^!?\[(label)\]\[(ref)\]/).replace("label",yn).replace("ref",fs).getRegex(),vi=j(/^!?\[(ref)\](?:\[\])?/).replace("ref",fs).getRegex(),Ba=j("reflink|nolink(?!\\()","g").replace("reflink",Si).replace("nolink",vi).getRegex(),ms={_backpedal:Or,anyPunctuation:va,autolink:Pa,blockSkip:Ra,br:Ci,code:Ia,del:Or,emStrongLDelim:_a,emStrongRDelimAst:Ca,emStrongRDelimUnd:Sa,escape:_i,link:Ma,nolink:vi,punctuation:Ea,reflink:Si,reflinkSearch:Ba,tag:Oa,text:ka,url:Or},ja={...ms,link:j(/^!?\[(label)\]\((.*?)\)/).replace("label",yn).getRegex(),reflink:j(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yn).getRegex()},us={...ms,escape:j(_i).replace("])","~|])").getRegex(),url:j(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Fa={...us,br:j(Ci).replace("{2,}","*").getRegex(),text:j(us.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},wn={normal:ps,gfm:ba,pedantic:xa},Tr={normal:ms,gfm:us,breaks:Fa,pedantic:ja},Z=class{constructor(e){F(this,"tokens");F(this,"options");F(this,"state");F(this,"tokenizer");F(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||pt,this.options.tokenizer=this.options.tokenizer||new lr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:wn.normal,inline:Tr.normal};this.options.pedantic?(t.block=wn.pedantic,t.inline=Tr.pedantic):this.options.gfm&&(t.block=wn.gfm,this.options.breaks?t.inline=Tr.breaks:t.inline=Tr.gfm),this.tokenizer.rules=t}static get rules(){return{block:wn,inline:Tr}}static lex(e,t){return new Z(t).lex(e)}static lexInline(e,t){return new Z(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));let n,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(A=>{c=A.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){i=t[t.length-1],r&&(i==null?void 0:i.type)==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=o.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,n,i,o=e,a,l,c;if(this.tokens.links){let A=Object.keys(this.tokens.links);if(A.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)A.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(A=>(r=A.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),n=t[t.length-1],n&&r.type==="text"&&n.type==="text"?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),n=t[t.length-1],n&&r.type==="text"&&n.type==="text"?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,c)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let A=1/0,h=e.slice(1),m;this.options.extensions.startInline.forEach(p=>{m=p.call({lexer:this},h),typeof m=="number"&&m>=0&&(A=Math.min(A,m))}),A<1/0&&A>=0&&(i=e.substring(0,A+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,n=t[t.length-1],n&&n.type==="text"?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let A="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(A);break}else throw new Error(A)}}return t}},cr=class{constructor(e){F(this,"options");F(this,"parser");this.options=e||pt}space(e){return""}code({text:e,lang:t,escaped:r}){var o;let n=(o=(t||"").match(/^\S*/))==null?void 0:o[0],i=e.replace(/\n$/,"")+`
`;return n?'<pre><code class="language-'+ne(n)+'">'+(r?i:ne(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:ne(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,n="";for(let a=0;a<e.items.length;a++){let l=e.items[a];n+=this.listitem(l)}let i=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+n+"</"+i+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);t+=this.tablerow({text:r});let n="";for(let i=0;i<e.rows.length;i++){let o=e.rows[i];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=mi(e);if(i===null)return n;e=i;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}image({href:e,title:t,text:r}){let n=mi(e);if(n===null)return r;e=n;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},Mr=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},V=class{constructor(e){F(this,"options");F(this,"renderer");F(this,"textRenderer");this.options=e||pt,this.options.renderer=this.options.renderer||new cr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Mr}static parse(e,t){return new V(t).parse(e)}static parseInline(e,t){return new V(t).parseInline(e)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let a=i,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}let o=i;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;n+1<e.length&&e[n+1].type==="text";)a=e[++n],l+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):r+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=a||"";continue}}let o=i;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},ft=class{constructor(e){F(this,"options");F(this,"block");this.options=e||pt}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Z.lex:Z.lexInline}provideParser(){return this.block?V.parse:V.parseInline}};F(ft,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Br=class{constructor(...e){F(this,"defaults",As());F(this,"options",this.setOptions);F(this,"parse",this.parseMarkdown(!0));F(this,"parseInline",this.parseMarkdown(!1));F(this,"Parser",V);F(this,"Renderer",cr);F(this,"TextRenderer",Mr);F(this,"Lexer",Z);F(this,"Tokenizer",lr);F(this,"Hooks",ft);this.use(...e)}walkTokens(e,t){var n,i;let r=[];for(let o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{let a=o;for(let l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(let l of a.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{let a=o;r=r.concat(this.walkTokens(a.items,t));break}default:{let a=o;(i=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let n={...r};if(n.async=this.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=t.renderers[i.name];o?t.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),n.extensions=t),r.renderer){let i=this.defaults.renderer||new cr(this.defaults);for(let o in r.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=r.renderer[a],c=i[a];i[a]=(...A)=>{let h=l.apply(i,A);return h===!1&&(h=c.apply(i,A)),h||""}}n.renderer=i}if(r.tokenizer){let i=this.defaults.tokenizer||new lr(this.defaults);for(let o in r.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=r.tokenizer[a],c=i[a];i[a]=(...A)=>{let h=l.apply(i,A);return h===!1&&(h=c.apply(i,A)),h}}n.tokenizer=i}if(r.hooks){let i=this.defaults.hooks||new ft;for(let o in r.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=r.hooks[a],c=i[a];ft.passThroughHooks.has(o)?i[a]=A=>{if(this.defaults.async)return Promise.resolve(l.call(i,A)).then(m=>c.call(i,m));let h=l.call(i,A);return c.call(i,h)}:i[a]=(...A)=>{let h=l.apply(i,A);return h===!1&&(h=c.apply(i,A)),h}}n.hooks=i}if(r.walkTokens){let i=this.defaults.walkTokens,o=r.walkTokens;n.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),i&&(l=l.concat(i.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Z.lex(e,t!=null?t:this.defaults)}parser(e,t){return V.parse(e,t!=null?t:this.defaults)}parseMarkdown(e){return(r,n)=>{let i={...n},o={...this.defaults,...i},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r=="undefined"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let l=o.hooks?o.hooks.provideLexer():e?Z.lex:Z.lexInline,c=o.hooks?o.hooks.provideParser():e?V.parse:V.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(A=>l(A,o)).then(A=>o.hooks?o.hooks.processAllTokens(A):A).then(A=>o.walkTokens?Promise.all(this.walkTokens(A,o.walkTokens)).then(()=>A):A).then(A=>c(A,o)).then(A=>o.hooks?o.hooks.postprocess(A):A).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let A=l(r,o);o.hooks&&(A=o.hooks.processAllTokens(A)),o.walkTokens&&this.walkTokens(A,o.walkTokens);let h=c(A,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(A){return a(A)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+ne(r.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(r);throw r}}},dt=new Br;function B(s,e){return dt.parse(s,e)}B.options=B.setOptions=function(s){return dt.setOptions(s),B.defaults=dt.defaults,bi(B.defaults),B};B.getDefaults=As;B.defaults=pt;B.use=function(...s){return dt.use(...s),B.defaults=dt.defaults,bi(B.defaults),B};B.walkTokens=function(s,e){return dt.walkTokens(s,e)};B.parseInline=dt.parseInline;B.Parser=V;B.parser=V.parse;B.Renderer=cr;B.TextRenderer=Mr;B.Lexer=Z;B.lexer=Z.lex;B.Tokenizer=lr;B.Hooks=ft;B.parse=B;var kp=B.options,Ep=B.setOptions,Rp=B.use,_p=B.walkTokens,Cp=B.parseInline;var Sp=V.parse,vp=Z.lex;var xn=class{constructor(){this.loadingGif="data:image/gif;base64,R0lGODlh8ADwAPcAAAAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3F2eHR8gHeIj3qRnXyaqIGswYS604bD4IjL64jO7ojO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74nO74nO74nP8InP8InP8IrP8IrP8IvQ8IvQ8I3Q8I7R8JHS8ZPT8ZfU8ZrW8p3X8p/Y8qHZ86Xa86fb86rc9K3d9LHf9bbh9bri9r3k9sDl9sPm98Xn98fo98jo98rp+Mvp+Mzq+M3q+M/r+NHs+dLs+dTt+dbu+dfu+dnv+tzw+uDy++Pz++b0++j1/Oj1/On2/Ov2/Oz3/O74/e/4/fH5/fL5/fT6/fX7/fj8/vr9/vz9/vz+/v3+/v3+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgDkACwAAAAA8ADwAAAI/gDJCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjR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0PCO0fCP0fCP0fCP0fCQ0fCR0vGT0/GV1PGX1PGZ1fKb1vKf1/Kj2fOl2vOm2/Oq3PSv3vSz4PW34fW64/a95PbA5ffD5vfF5/fI6PjK6fjM6vjO6/jP6/jQ6/jS7PnT7fnU7fnW7vnX7vnZ7/rc8Prf8fri8/vm9Pvp9fzr9vzt9/zu+Pzz+v32+/34/P76/f78/f79/v7+/v7+/v7+/v7+/v7+/v7+/v7////+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8I/gDNCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KlOcuW69QkQr1qdMmRlizat3U6VMoUqhe2eLVtKzMX7halQKlSavbt3DjagJVqhWuX2bzjszFatTVuIADC866aRSrXHoTX8y1KtRgwZM0cfoESpSoUaQyjxIVCpTVS4JDrUKsuPTCWqTaPtaK6dOoVLJu+arIyxYrU6E4PXKriVQt08AFygq1ezUjToZv4RXpi9YpUKCxPhIlK3jeWqKMTwKV6pZLXrFI/nHKKuq3daS8TkUf7AkVLpu9YokCfekU2fNCazke/CgULGA93XLKVaGYhx9PrfwVWnVD5TLgJq0ciBMwqTzmCSvLHYULKZGkAqCEMQGDiiWQlUJaU6+AgsqHILKUComBccJKabeQkkqLKr2iGmCgGGhaL6nAgmNJtnQSmncH/vIKkkN61MsogoHCZIu19NIkR6sI5oktVw70XpcW5fJJYJrEAiZBvVh5ZkQVBobKmgapCedCvIwJWCj3zVlQhnoWBEtgmTDY56ALkRIYKXwSqihBuRgZFya0LCppQbJEApgok2YqECqBraJpplDGxcmXnyrqCyiXliqpLuPFdaOq/oriAtgjkcJKqC2AaUKqrXrWApgncvI6p69xhSLsoMTChemxeuIaFynM6nkLYKVEO+cu1FoLpy+tvgWttmva+dYo4K4Z6lvGlgsmp3B9oi6Ysog627tN5lKcW5boQu+Vjr7l474gGgqXpwDj+Cdc3xYMIi9xuatwi+JqNUmeD+PX5luCVnxeLnFVq/GBEWfFyccHZgnXlCT/GNebKVt3rladtGyds2+hLHNi/Wrl8c2lvQKXJjwDt6NWZgat2MVagWK0YsDA6NauS5fFrlvkRp1X03AFazVTSGe189ZNwfUI2Ga1ApcpZJelYFaNzJu2Usnq/DZT+7lF8dxGMfzW/rJ4I3UKXFD3TdR6WTksuFFxZyXk4UZl59YljB8F19eRBxXvWydWHpTjMGtO1L1ZqeJ5flmPHpTAWhluuk9DY0Xw6j1x/JbWsOdkcue191R3Vqfk3tPJvu8ku1aWBL8TK+gar9PLriuf09pYZe78TL+8Vfz0NsnqltLY12S2W713T1Mpb9UqvkyoukX7+S21fj37Mb3lCfwx6a1VwvS3RHNWr+fPks9u+Zf/UjK1rOxigC1BXVYQ2JLdMQJyDFxJyEYWQZXkjBHcqyBKoFc1DZ7kLWjz4Afd8ioRluQtETLhCd2SMRWGxF8uJMlbuBRDkdSshjZ0i81wuJEb8vAj/j78YUegt0MhXuSCNDTiRkImQCVaxIEtdKJFFMiIV0hRIwVkhOiuiBEA8o6LGNkfI/AHxolgSyvpKmNF3BIzNVZkaJlwY0XSt0A5ToR8WrmbHRvyvawUcY8J0V5WZgTIh1RPboV8yNoymEiGvAwTjXQI8rTitkgmZHhYSaIlE0LCTS5kd2n05EFuxwhIihIhmGTE+k5pjqFZkZUGUSDfYDmQuMWRlgUBnb5wOZDdbZGX5rgcVhjJS7cAcyCcY8TigBm3UPKScImi5d8Ud0xz2A+D1TTH7lZ5yriVEJgK2kQ2+8iIJsISjdlEmh5hiTWsUA6XU4tENtvJiG/y8mKm9Kzmjn4JTC/m85j9sicuaQbBap4rfMfsRR6zebsOHlNcmuTl8NpYzYvxE5h2esQ6YWk/Z/LyYFXMpjkENglustJRHsVlLiylRZEKM3DwxAoFsxmqWR4zfQLFJbewYk5Y6gIr+RKp9mZaTWcRk5lYcegxiRXCbBIrpwPFykWBOS1G9O+YuxjPVYHpizFNFZhQYplIOdXUbMriEUo9ZqNAEU1gimejuIRFJMyXzTqJVaSpCEVbJSqKP+JyFXfNZi9UcUCRCuQWdBXpWAw7EL/ysrCMNUclI0vZylr2spjNrGY3y9nOevazoA2taEdL2tKa9rRuDAgAIfkECQoAzQAsAAAAAPAA8ACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBQkJCQ0NDRERERUVFRkZGR0dHSEhISUlJSkpKS0tLTExMTU1NTk5OT09PU1haW2dtcJepg8Hfh8ztiM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7vic/wic/wic/wic/wic/wic/wis/wi8/wi9DwjdHwkNHxktLxlNPxltTxmNXymtbynNbyoNjypNnzp9vzqtz0rd30sN/1tOD1uOL1vOP2wOX2xOf3x+j3yen4y+r4zer4zuv4z+v4z+v40Ov40ez40+351u751+752vD63vH64PL64/P75vX76vb86/f87vj88fn99Pr99fv99vv99/v9+Pz++fz++/3+/P7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4AmwkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cw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o7h+tM6Ew+GHyuqIze6Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Jz/CJz/CJz/CJz/CKz/CKz/CM0PCO0fCQ0vGU0/GX1PGY1fKb1vKd1/Kh2POl2vOo2/Sr3fSv3vSx3/W04PW34fa85Pa/5fbB5vfD5vfG5/fK6fjN6vjQ6/nR7PnT7fnU7fnU7fnV7vnX7vnY7/ra8Prc8Prg8vvj8/vm9Pvp9vzs9/zu+Pzw+f3y+f30+v32+/73/P74/P76/f77/f79/v79/v79/v79/v79/v79/v79/v79/v79/v79/v79/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8I/gCtCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KlGelSIgIAeqjB4+dNlizarWDR08fQIQQRbLUtKxMTpMOAdJTR6vbt3Dj1tED6NAkTmbzjqR06M+duIADC9Z6588hSnoTX6RkiM/gx5Af7zGEWLHlhY/+tI3MuTPgOn8eXR4t0FEfOJ5Tq4YLp08j0nkh+VlNu/ZbP5BgJ7U0aI7tNnPw7PkTqBAiR5AkUVrOXBIkR4gKBfqzB49v23MGkdUtFJJj1XHw/vwp9IhSJ42dKD0q9AdPnNV8cnPveeiq5zyAGFVCWYkRoDyp2XHIfDh1QohnehASiUyREKKHZ4ScR2BMBsoRWR2APCKhTZ08Ashmj8kR4YQuEWLhY3cIMglQkwjyV4iEkKgSIiAGRkcgKxY1CSB0PFYHIjKWFAmAg/Uh2lKP9PFYHgsG+REmswlWByGY5IUJITXG5UeVTm5kyGB5MDIaI0QGZkiXGFHyYGB7NAlbJHsIpkdlaEpUiGB8SEKiJN8BVkidEFmyZlx76OmkJHECpsd2gCqUSGB5yFcnJGXClUijCf0BGB1AYioQIj3G9YenBFGCB2CBkFpQIIDhQWej/o28B5ceOapK0CSDugWHI5geyNqZtiJkCGpwxVhnlG/twWiwB1mS6FujOqlJrloBy+xCX86qiYyVvOhWHsteq5AllWZ1x34EThIXIOJGBEhchuoWCWuKtCuRIsS65eZokMDlqr0TmQqXpJY9ApcfAFuErFZHKtbvW4IkfJEgAys271sDSnzRIXDt25Qkb8HRsMYWPZJvVrUyVclbc8RL8kWSXKcVuktp4i1WdXD5ckaYZHnHtktRe4fOO/N8cxt6LKUpYUQXbbRbCCPlq7lNO/20VsYW5YhbdlRtNc/2ZfUaUZScPIfXX/MscxtxvArUqVnFkXLaHU0iK1Z4DLV0/lYE0+3Rw1lF+9OjWnXqd0iIuHWpT5a4lfXhIU2NVbg55So45CLtjXRPd2aVB+YmVfqnTpRoJQfloH9kyYlYuV1TrrymXtLWWSWNU7ZYRSy7SRRnZS1NmGhl++4m5Yq2S8jGATTxJWlyd9QzXYyV4cyXlHhWHr9UJvTVm4Ts5zJdD9zy3TcvM/Uugbh4+ScR3kYdMU3dB/sqKYnV4yt1wjr59DeflRwbWsnU8Ne/kgywJfrDyh0KuJIXAZAlU4sdA1FCuzYQ0CRZ2cMEV/KslXAMK3PbYEnUhZWMocQ+lxPhSZZmh5QAjmYqPMnKsNK3kXyHXTFUybvawIeTNG5y/jlUyQ/bgLqPDAIrKQyiSZY2CJNcx3VKJEnpgFOSh80vivWjIUmiFEIskoSE3AMJVsDnxZQQaSSNwMr6ytg+rEjwI0qSAxtXYqErggQ1OJwjSt4Fh5AYrA0w1GNJZjgyjmiKjII8CYCSqJG2/C6RJfkS/DwyxUxAEiWZaJ1HvqTBS6IkTo/MSJzQ58mRJK6HHcEK/0opEk1gpSOlGx4rS/IgKFaEY6ObZUnuZMKMaCqQugzJyhhZkTtMMpglqcMCNcKJNhATmR7RFF4yoi4xQZMkjGhDFyfCsWtisJcWAUQLvUkSO+TxInp4Jjk38gdZWqQO4FynRw5xzIu0wZby/tRI6TJiCTfkcyRuAKZEIpG3f4YED9mTCCLUadCL/IGUEiFELhvakUJc0F01pGhGIHFOivShiBq1iCXsWBF3hlQjJpVIJ0/KkZVWJIwsxQhMJTLTmL4UI7qzaUZyWpFQ6pQiPo3I2H56kaFWJKFEjQhSIbLNpD6kqQ8BqVMbItWpWvWqWM2qVrfK1a569atgDatYx0rWspr1rGhNq1rXyta2uvWtcI2rXOdK17ra9a54zate98rXvvr1r4ANrGAHS9jCGvawiE2sYhfL2MY69rGQjaxkJ0vZylr2spjNrGY3y9nOevazoA2taEdL2tKa9rSoTa1qV8va1rr2tbCNH61sZ0vb2tr2trjNrW53y9ve+va3wA2ucIdL3OKyNCAAIfkECQoAygAsAAAAAPAA8ACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4PkJEUGRtZoyfebHMgsPhh8vriM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7vic7vic7vic7vic/wic/wic/wi8/wjdDwj9HwkdLxlNPxltTxl9XymdXymtbyndfyoNjzotnzo9nzpdrzptvzqNvzq9z0rt70st/1tuH1u+P2v+X2weX2wub3xOf3x+j3yOj3y+n4zOr4zer4zuv4z+v40uz51O351u752e/62/D63fH64PL74/P75fT75/X86fb87Pf87ff87vj97/j98Pj98fn98vn98/r99Pr99fr99fv99/v+9/z++Pz++fz++v3++/3+/f7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4AlQkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdypQnID112qQ5Q+ZLFypYs2rt8oXMmTRt6ugR1LSsTEd96KQps0Wr27dw424pk4ZOH0dm8478MweNl7iAAwvW6gXNnD96E1/8E8fM4MeQH5uJg1ix5YV50nCJzLlz4C1p8lweLfDOGSueU6uGa+XMHdJ59aBRrQWMmTRs4NS5k2cPn9+/9+S5Q8eNGjRlvmRZ/RaNHthJBbFZDllLGTVz9gza+DROGjFYmP5nYUMWutA8jgdrMeNmj6KThfCwKRM+tRnR5nvS+RtYC5o6h8TkR2P1ceYFHfnh9IgbgpEBR2U38cEGGJ658UiCMj3SRoFvmWEHUIfEQQZnWLRxIYYtucGhVmXUgRdRhcBBIWRYuIGiSnW09VYXbhSylB9qUDfYFnXcWNIeYcBlxnN52TEGZGHsYSRIhszmlhVqlKdYH1YOhoYhU3IUx1tZ2AjdIGpAFkeYGP0xolZarImhImtUMRgZELIZ0RtuZfEGm2kO9qeeDwnyZlZsEKoMIl0CRoaWiiJUh1tobBepMn2UMViRlxqUhlZRdkqQHToCloaoAv0xIxVVwIGqQf6BAvZFnoTegRpWZlj6akF8rMraa4q2kdUVnO6KkLCBtUFol2b4aKxCfHwRGBphKnKoq8829Kmj76EICH9e+JHtQ3dcAZgXgGDYR1bUjguRIE8Cxkd+e2Q1qLsRbRuXlLDlgRUW+OEr0ZiABWyZv1R8ka7AFOmxolYG64VwGQxf9G3BitVLRbsVW7TIoW/xaxYfWK3RsUZnANaHWYBgZebJGTXq1sJLKfKXnDBrpK9bXnSr1Ig456xzXGQsNVvQQg8NF8dGCYtt0h3trJWyRt1BBdVQeyRzVsAO9QeWWYeU3pW0/vQF02F7JAZcYAy1VtoiHbLZW6cCVYcXjcAtUv4fdr5VLE+CXAGp3h/hEdfgOZGBB+EkMfhW0Ty9gTXjIqX81r04/XEG5Sbx51bZNJ2RN+ck+QEX5DfFITLpI8kBF9IyGTI56yNZ7haYNT1Ne0laNFfTHjTvTpLhIdO0uPAnSU1FGDMxibxJjvTu1t8uIf68SFa7tUVM816Pku1Zvez9aIK8hcWJLAU/fknITr0+bFdpdT5LPr9vkh1viW9/Ymu7tf9lengLgv6nGE0RhoCKIZlbIobApowNVw3Ui8a0Yr0IJgVkVEiUBcuCsKxkYYNmkZZWnAdCpcyBUiVsirm0kkKmSK1rLTzKH9yyuRgmpX9YsYINk3JCiO3wKP6McEvdflgU8HGBiFX7HBKLciuswG6JPgGfGaA4FPyxkIpBeYQSsQgUHFJhDlwESvs2FsafrCsrXijjT1aIlRepcScGxMrK3rgTx2FlgHTMiQKxMsQ84oRFftSJCKmwvUDipFGGxEkPsaK+RHJvhI6sSRCzQr1IwkR6V7MkTQ7VR02+pEs19CRM7Ig6UbokewkzJUz22AVVvmQRV3RlS2Ipy5WwsZYtKRUuWTLIXa4kXlTwpUriKMyU2K6YKOkSMk+izGWWZFutdCZJtvUFaU4TK6W05kesFEptfsRynfQmR9IzO3FuxICVNGdGkkQFEqpTI/yp4DsrQp15dgQrhf60p0awQjF9ZqR8VAinPycSQCrgcaAV6eEcEVqRQLmRoRNxTBohWpG/oI2iELETGDEqEVhSAXQcXQjxQioRNlBhiiSFiKaemNKELAekLTVI+fIZ04XgT6A19RQVGJhTg3hBhz1VyCGo0M2gGgR/MDRqQWajVJdetKnKIJk7oaqM6VDVpxq8aqqoIE+jsgGlWhVIF3jaVD9MNKzKqAtaBXKFtSqjDvq7ahnQp1U+lJOqaaDrVQsRV6r2FaqNSCdUBQvV7qGVrFDFHVoXGlZEuFUZzkJrZB+LVkZQ9rKYzaxmN8vZznr2s6ANrWhHS9rSmva0qE2talfL2ta69rWwjSStbGdL29ra9ra4za1ud8vb3vr2t8ANrnCHS9ziGve4yC1mQAAAIfkECQoAwwAsAAAAAPAA8ACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyODw/PkdLSFlhW3uKa5itebHMgsLghsrqiM3uiM7viM7viM7viM7viM7viM7viM7viM7viM7viM7vic7vic7vic/wic/wic/wic/wi8/wjNDwjtHwkNLwk9PxltTxl9XxmdXymtbyndfyn9jyodjzotnzpNrzptvzqNv0qtz0rN30rd70r970sN/1st/1tOD1teH1uOL2u+P2vuT2wOX2wub3xef3x+j3yen4yun4y+n4zOr4zuv40Oz50+351e752O/63PD63/H64vP75fT76vb87ff88vn99Pr99Pr99vv99/v++Pz++/3+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4AhwkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdypRnnjpw0pQBswULFSVYs2qlgmULmDJp4NTJ07SszD933pThIkWr27dw40rhUubNnT9m847E82ZMlbiAAwvWWmXMGzx6E1/E48aLYChVsnD5ImYMmctkxoTposWKFCeDBXdxg1ix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/fD5/fL5/fP6/ff8/vr9/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wj+AJcJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcoU6SNGig4VEvTnDx89fgANMqToUdOvYB8lIvTHThkycPYEKrRoEti3ShkV+jOHjF06fwo1gsv36KE/ceza5aO3r2GhjQjpEYwWUKLDkH1KMsSH8Rk/hyJr1imp0B3GZP483ky6pqNAahivGeS1tOuYhj4z7jP6tW2Wi/yAplPotm+Vjf6AJkOI0u/jJR8BAp1mkHHk0EE6Es5YDaHo2D0uqswYjqHs4DX+IqoD+o6i8OgtEhr+J1L69xEn9RneG779hobWgNaz975/hJPoBtp1/xVYkCFo7NeagQZKshho3zHIoCDDASIhg4ikAZod/V3o3yOyCXYGIh4WSB1jg5T43yDsqeifIcPl4ZaL8CWSIGN1OEIjfIu4MdwiO74XiRzDnRckepHQMVxtR2YXCXmgMdlkdEkuOSV4kQQGmpFXUqkfaEB2Gd0iZgyno5jQJTJcHZKgCV0hw+nhJnQUgvbHnMgJiCKex9kxXGZ83tbIGaCh0WGgrh0y3B2I3hZIhY3aFqJgEUZK2iPDkbGgpZrBuR+npXHHGIGgRvYIoaAdWqphnjIm56r+kT3IWH2wGsZIpu7ValidjN2pq2E+bvlrXzCWN2xfk9pV6bFfqQkaHMzCJapgpEbL1CLDqfGctUzNB1qK3F47XBrbhpvUtHZVa+5RimS67lJ40PduUoruNm9ScFh5r1EsgtbHvkZJkummAAelp2DgFiyUs6opTFSwjEnpcE+8CubrxD/dOhzGQSkJGokc+1SxXX6E7JPGlpnsk5YRq8zTcqBZ6LJODAsWx8w6UZKpqjjTJKtgtPZcU7+zCX1TuxsbbdPOSteULBlBNw3To3ZKPVO9jNFhtUyOZDrj1i/dyFiYYLv0dNRlq3SiYIGk7dJ6oO3hdks12wXt3Cs14i7+3irpbCbfKn3JGJeAm+QnhIWjhC4ZCSdO0tp2yew4SSOTUfLkJMHtKuYkFcuYHZyPhMhwcoQuUt12mR4S0qCpDhLKjLn+EeyCye4R7anbzhHuZOi++96+Z8R78BqxHjvxGKHeO/IXjQ5a6cxb5LlgoEdfkeaCvWr9RJVfvr1EkJMh+fcQLd44+Q4dztiy6DckuGCEt7+Q36ARLH9Ceid9P0Oo373/Qtizi9z+t5DwtY2ACjkbAhUiNsGQbYEF6dpwvgZBgmBNMFqroEGo1isNGkSBHiQI00IoEOPVjoQCIZpg+IBCgfzMLmirIP0Yw7MK9q+Fy4AZY8YXwnxFqYX+2ALNGXDYPRx6jDGAImEQW9dCDloMhxATjMRsOJw14PBgdjmfBgU2HPtVUIV2+VcLfdgyFF7wLjiMF2hiCEET5g6Fi1OXBpcoGHK10Ft7QiEd7aKtFsaxhTds4dPYp8Hp2YVRLYyiXeKnwcpdLIS8yxUJXwi1FrYqey081XBqCME/ovCSdtFeCDHVRUEOh5AVdGLkWnhGMlSPhIMSIicXqD7BgIyEWGRcCx1pyRgBck0UnGOZQHOmEEbifXZ5oAazVCQUVumHJHySvox5RCk6k0jCUqIiyaBMGzaQDDlCoSHJoIc2kRCMoWlh+LQIQRAVKokezFB5ZknAyvGwgg6bOqU4v6kHLyIwQMORIwTzsx967k8+8iJhAEMjSQ2OpzyMXOB2noVKBE4HNNYhoXKY45wQBieg5YJgbnbDRgLGxl9TJOBpUiOY1fhzf51Jlmg8OAnKWMYPt4RgYn4WB8d48C8sI0MfCgNBudAFg3kx6PbEQhazoEUtbAnmUqEiFapYBSta4UoxccjVrnr1q2ANq1jHStaymtVNAQEAIfkECQoAzgAsAAAAAPAA8ACHAAAAAQEBAgICAwMDBAQEBQUFBgYGBwcHCAgICQkJCgoKCwsLDAwMDQ0NDg4ODw8PEBAQEREREhISExMTFBQUFRUVFhYWFxcXGBgYGRkZGhoaGxsbHBwcHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJiYmJycnKCgoKSkpKioqKysrLCwsLS0tLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2Nzc3ODg4OTk5Ojo6Ozs7PDw8PT09Pj4+Pz8/QEBAQUFBRkpMU2NqYH2KbJWodaa9fLTPgsLfh8vriM3uiM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7viM7vic/wic/wic/wic/wic/wic/wic/wis/wjNDwjtHwkdLxk9PxldTxl9XymdXym9bynNbyntfyn9jzotnzpNrzpdrzpdrzptrzp9vzqNvzqtz0rN30r970tuH1u+P2v+X2w+b3xef3x+j3yOj3yen4yun4y+n4zOr4zuv40Ov50uz51e352u/63fH64fL75PT75vX86fb86/f87fj87/j98vn98/r99Pr9+Pz++/3++/3+/P7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4AnQkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNaKaFdC/IR27ccGcGdexGSIrp4JyZalLev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3/L64PL74fL74/P75PT75vX86PX86/f87vj97vj97/j98Pn98vn9+vz++/3+/P7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4AmwkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTLiw4cOIEytezLix48eQI0ueTLmy5cuYM2vezLmz58+gQ4seTbq06Y2RTquODGn10dauicKOPRQRbdm3hQrKLdQQb6B8fv+M1Ee4zznGez5CnnznG0nNdSKSE12nGujVb/Jhnt0mlu433/7oAV8zERnyNccEQj8zzhr2MhU5aQQ/Jhnq9V/G4ZL/JSInu/XXUhdtCNhSG04YyNIfTgCioEqQOMHGgyqRUQWFKb3hxHoYmgSIE290aFIjToQhokldOKHIiSSp4UQdLI4UhxPvxRjShwnaCFIkTqioI0hVODHejx6R4YQbRHq0hhPnJcnRjE6k5qRGevRo25QZDdIjHlhmRKITcHSZUY9qiIlRj2CYeREXPappkZFOLOImRWf0OMicE7noRHB4RrSkE/j1+RCCIAoKkRs9TmioQ4g6kcaiDmnohBmQNiSpGJUy1GiOmSZEKKedHsRGj6CGWpCepZo6UBqkqnpQGf6tuloQGLHKOhAWtdraDKmpqspjrrL+1yOmujaD46TFNjMHqY8Wu6miurLaY4jFekFqoLL+2iOftgprZ7FVkkqfrpv2aqoZpKZZLK9l6noIr2HquiypXOqKqhNX2oorqVIGy2uTtsrBK5K6osHrkLJKwquPtvqxcLGjklqjrUGSCqOtx/a4oq0Ro6mrttPqGi6pHMpqMKkX2iofr9C6CsfCDur7sK0j91igrbDyGqCrgSzMn633AmprIQvPZ+ufEtv67sIlqxo0wKpquTDCqp7MK0uzdcfgwtypKsbCWWC3kpzdCbwwtqF+yasWYrOUb3Mdk9p1S+Mml7HHMd2ZnP4kXxTNLUwxCycpr2fQVAjZvN3dYyE10SGctQsTTBMkaLsWN6lZz1QH47TZUfSLObXRr2qJfN4sToq0fBqcC2+c0xyVj/Ypr3PjlEbgpM278Ok7NYJF3aIp3iPwO/VBxuifIVLxwsUB9Ua7oEESxufUBnWG5J5ZzSulQymCRRyfIc1rFa4L9WHsls3OK+5DCey4ZoOfnRSiF1/28ufYH+Vi/ZTdXzTvSIGEkd43mfj9C3lIWUSPateYci0McUwRFvggczleva0pRDuSYyIhrc9xLiqCIBNjFsG6ou1MKj1zQhkgWBhBZOFzPWraVELohCzIUDB1gGGPTliVDDqBgf5+MeDCPogVb90MMI3o4OcuiBUS9ogMifgLIF4IQzKwUCscJBUB9eK/z6khc13Z1BrAOBdEoEuH+QOL2ZyAhb/NZY0wRN9XALE8NjxiLoeokw6xwD6yKOKMTqjCFtvSxc+doXxoid8ZiJgWQNBKh4VySx8id0e0ICJon2veW5K4sAmSBRIONB3x3qK7Hm0BiFspJAxR6RZFKNEJXhhkViARh+XpMA2IrEsOF+YFVkKlEXCIAiQt1hdQFg0LcBjlUxChPjSSMS+F0OPC1sBDpvjhlTpcJGH48MiFjWEOlUyKIuCwhWGmy42DmYMWYKiGPiDwJ5CggzTNqQVfAkYScv6g4ufW4AegQKIO2IRkFuTQNsVIopSmo8MVZ4KIOADSnHIrqGP0UMLPfaENfHhmShRRhzXoE6JPpBplAiE+HXphDXMohEY98ohAxEENHwVpj9ZwQ8s0Qg5sAqkX1AAHPRQinBhZhCDq8AY0rFOmReOCHJSpGUE0E6RfOMMa3hAHOvABEIEohCEQwVVDFCIQgNDDHOLgBjWYIadI1WEbqhkaQLDBlmmNq1yLVgU29PE0gXhDN+fKV5CG4Q01pQ1HS9rXws60DrlsjiL04IaKGhaiZHCDHhKLnkggAg9wUMNeH+sEMPAUD4h4J4YaMQg+yOENbEiDGb6mQzGYIQ1seBqDHPgwiIUm67a4za1ud8vb3vr2t8ANblcCAgAh+QQJCgDUACwAAAAA8ADwAIcAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpSW19lgY92p7+Au9eFx+aHzOyIzu6Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Izu+Jz++Jz++Jz/CJz/CJz/CJz/CJz/CJz/CJz/CJz/CJz/CL0PCM0PCO0fCP0fCR0vGS0vGU0/GV1PGW1PGX1fKZ1fKa1vKc1vKd1/Kf2PKh2POj2fOk2vOl2vOm2vOm2vOn2/Oo2/Sr3PSu3vSy3/W34fW74/a/5fbC5vfG5/fI6PjK6fjL6vjM6vjO6vjQ6/nT7fnW7vnb8Prh8vvk9Pvn9fzq9vzt9/zv+Pzw+P3w+P3w+f3x+f3x+f3y+f3z+v30+v31+/32+/33/P7+/v7+/v7+/v7+/v7+/v7+/v7+/v7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////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8IzQ8I3R8I/R8JHS8ZTT8ZbU8ZnV8pvW8pzX8p3X8p/Y8qHY86LZ86PZ86Ta86Xa86bb86fb9Knc9Krc9Kvd9K7e9LDf9bHf9bLg9bTg9bXh9bfi9brj9rzj9r/l9sLm98Xn98bo98jo98rp+Mvq+M3q+M7r+M/r+NDr+NLs+dPt+dXt+dfu+dnv+dnv+tvw+t3x+t/y+uLz++X0++b1++j1/On2/On2/Or2/Ov3/O33/O74/e/4/fD5/fH5/fL5/ff7/fj8/vr9/vv9/v3+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wj+AJsJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKnUq1qtWrWLNq3cq1q9evYMOKHUu2rNmzaNOqXcu2rdu3cOPKnUu3rt27ePPq3cu3r9+/gAMLHky4sOHDiBMrXsy4sePHkCNLnky5suXLmDNr3sy5s+fPoEOLHk26NMRLplNHpqTaKOvWRSvBJppo9lDZtoUWyh0UEe+gf37/BIRaeM88xnvieZ08JyY5zXfaqR0dJyY11XPeCZ79JpbuN/v+xAFv04si8jQLdUFPc00d9jIjSWkEP2YdL/Vjanmf36UhKdT1xxIcWgjokhRwGMiSIFIEouBKbkiB24MoWfEFhSkVIgV0GJ4UR4MdnsSFFJGEWFIjUhRoIkl6SIHdiiOpIQV/MIYkhRSE1BgSilJYoiNIfEhhxY8gwSHFhUR65IUUayTZ0SU30uEkR4ncyMeUG/VxoyFYajTHjSV2iREaN4qZ0YhSmInRjSqqSZF8UuDnJkX/SUHGnBT9cSMaeE5kx41N9hmRHDe+IWhEbNyY4KEPnXHjeIw6JMajkTrUBaWVMnSjFJBmqtCmi3qa0KZtiPrpjS+aetCmZ6iK0Kb+YLi66o1cyGrQpt/ZStCmaeo6EK8++trMpTcGqOukNzoorKM34iFsM4li6iuhN7Yq7J83bvGsnpsWp2udxQoLCa9XCstrp7qiKUUYz5K56bNfbuqbr1pu6qyvVW6aqq1Q4vrskpsaK6uRm9ohbJCbliEsj5tiYi6vgAi7Bq9sCNvipkP6yvCNggirrhQV+/ohr97KqiG5wlrBq8K+RrspfboSwqsUczzsr68Eb1qureDeGKuvWsy8m651zMynrnDyOq+tE/O6r6snK+0rwPrSO7MUXOp6Ncu23nG1suQFqxImWcxcq67Y8moweJC4RPbVYcqKx9UhVycwSx8nW13+3C9xy+sWJQuXdUxjXI3ubznOdMjVOBoHydIy5byptsIhV1MljLvxmx0T0rQH43vkdkjoODE783mwXWJoThtvimRrbMCcUx6Mr56aHZbvZDqvd6RGiLU8JT1z4qNFggXfOwHCuBV3d3bJFxEDNbLZnXuWxuE+ITvznaDBwe5QjVzBeKCd0WGF7EIxyHiomv1JPFFpz8xhZrSvfZTkvNaM2efsH+Xu1fqrzOeAlxRLfIFxG6pMi74gNqU8AoEImozXpNA2p+SLcXVzDB3CBZXFIfAMDVTMyA4xlahd7QuPYIyMpDC0EkIwC4MzzCPAcKMWUsWEVyNdYQpRNhZmxYP+CJyfYGh3IxJq5YKMOwPy+pKz5lkFEgdEIBY65hdFRBGFX7HE7gDYFyJKAQ0h7Ar+ZhYGJ8ZlEk2LIFnixzj70eUPWCjYWQihMgiKAXJvkUQar0DFszQiDBCMUlzyUEcpiAF9aJkeArkANrUcggzneovyAvlFM4JlEviL3lsiscX1VS8sReOVEunixUBKSSx5CBqvckeXRnTyalagQxixooctzOwMiKzL5ygphSrMQRJawYMqeaVDvVRijAiEgyWXEok5iG9mcPikXg5ROF5K4QyadIoh0sirMRhRMH/IGwS1MIdFLGUSdyCW2bhjGDz00JpiyANzhHIJQKzwaln+uFdiMGGHd1rzDHuQZk4Awc2ZZcEODmsMJiZozU2JoQ7LdIkj8vA/BN4hoZHpA9UaKoUsrEEP5oRJJf4AB1sG0gt9wEwhCsrRLKChDoSYxEkscQg8rMGklFyDDTETiToMk6O8ykIZ5KAHQ1QwI5M4BB/mgAac8nI/S9yMIZAJVF5pIQxqgAMd8NCHQBTiEIhIhFgRcYhCCOIPeahDHNYgBqcCFQ4xHI0g3FDIqtr1rstjw/taU4g4iBOvgKUkF+KwU940Qg/3DKxiefXRXEanEXyAw0YX21AvwIEPjmXPJRLRB6b+VbFcQMMc+pCIwJkoEob4gx3kwIYziEGdjOseghjOwAY52OEPRn2WbnfL29769rfADa5wh0tcsgQEACH5BAkKAOAALAAAAADwAPAAhwAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUpKSktLS0xMTE1NTU5OTk9PT1BQUFFRUVJSUlNTU1RUVFVVVVZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVlZWZmZmdnZ2hoaGlpaWpqamxxc294fHSIknqaqX6nu4O40YXD4IfJ6IjN7YjO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74jO74nP8InP8InP8InP8InP8IrP8IvQ8IzQ8I7R8I/R8I/R8JDS8ZLS8ZPT8ZXU8ZfU8ZnV8pvW8p7X8qHZ86PZ86Ta86ba86fb86jb86rc9K3d9K/e9bHf9bTg9bfh9bri9rzj9sDl9sHl98Pm98bn98rp+Mvq+M3q+NHs+NTt+djv+dvw+uHy++b0++n1/Ov3/O33/O/4/fX7/fj8/vj8/vr8/vv9/v3+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wj+AMEJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKnUq1qtWrWLNq3cq1q9evYMOKHUu2rFmytc6q9ThrrVuNsN7KteiK1ty7EV+1wsu3IS1UbfsKRqjq1ODDBWOBeoW4MThUn245PkxLk+HJg1kt2otZsKhKdjvzjXWJk2TReFstCoWa7ylDpVrjDWXosuy3tTgZQnVbrqxKhlT1fgvLUPDhbl8Z541crSvjtpuXfQ5b+lnqrK2XVW6ok/ayxQ3+WfpOdpZxR7LIi60F3JAr9WI1LYcflrYhUPTBvjZUKf/XVsYZEpd/XMWiyHwEcmWJcZ4kyJUoxjESmoNYsRLgKhRmRUuADWaIlXyGJDKhh1ShEmAqJFoVS4CYpGgViIYw5uJUqgSY3YxRbRjgiDg6ZV91PULFnSGQBBnVJQEyZ2RTqwQYyZJPTXIilE3tZ8iTVC6VyyMBRpflUVYu8qVSuTgS4ChjJmWlITymOVSAhnToZlFNBvjenEVREiAleBZFHXR9EuUJnG0GypOOxnFiqFCmwMnKokFBAudpkPb0Z5yV/gSKo5n6BKchnfYEYICbhMrTJ3AqaSpOBwaY3qr+OF0qCaw5QRggfrTeJOWFudq0Ipxp9UpTKnBiKexMncAp57Exfeolsy39GqCM0L5UI7DVwvTjldnC1F6i3bp0y6dohstSeAEKZ+5KdU677kqjfFrouyPpBie9Ku1q3Kz4ovTpJf2ehCiDAZs0pHGiFFxSu8bFpvBIa+728Ei28jpxSKjCydnFH8Fo3J0ce7QgnNSGzJGeJJvs0acCqtwRywO6rBHMMm/Ecsk1W3RzzhmxDDLPFbH8KNA6f4oh0UF/qirSEbHsMNMSoWwj1BONHKB3VEfksXhZR5RxgEV2/VDFAYr9UMSGBGb2Qgx/vDZDBxuH4tsKmfdpwnQrxHL+JnkrpK9xj/SdkL2ECn5QvJ/+bLhAbRtiyuIFoRugopAPNO6njlRO0LcBxqK5QNvK/Tk41yo7urQBZj46yy1/Puinj39O7KfjfY56gMFq/rdx6mpOtnGajH7pjqO3muroXwcI8Oejfur556yXq/mmn4at+fDGDa25pJ8G/3mjNGs+8K2jvy7v59gbIn3lUgeISO6QNw6k5qwnMjrahpDyeZmsw784/jeC3JZYFzPI4Y9yumOd9uLHukmMDkks05/m4uYuzYXOOMur3Pi69LnSfaqAi9uacWpXudud6XMmYt3GICdCQzhiXnTbIPA+ZyHW4a1yv0vX5yDoM83FYhH+rEOP5pr3qUr4T3D4M0SpLMg6Q3zic4T7VAANx54m3nBxsmii+jQnOXJNUItXNFz6jIMryI0RU5U7IyaOmDcKBmgSIOxbF+GUiBUKbhacc1blatFCMjKxiZWIY96SyLvKtcJ4LCuj4WJhNZZFwo59yyGcRJELyNWwiZJYYN8qo0UnwtAslOpLCrX4LLN8ci6x6KNxJqHJsdTilHjxIOsyoTiwCLIxtLjgpzqBM67UpTev4GETecmVW6yil7JZxe5YxolaSuUvrUTOKbjUyUr0LiqwEEUppZOLU5ipk4wYxfOYxIlTVNI/3exkgDKhilAWJZuLMKeHVtE+LX4Ckj7wiYUpKEGJo7nIFebrpCI+wYpz7gQWpQCOJ5yZIlqYgnvqNEQmTnFLl9SCFaCQFCRMAcsUuYJ6ETUEIzpxCmQKjBWfuRVDs9SKTyAyopYIhSpg4U6P1KIVpugERAeKzz65QhTLjGgkNBGKU7ACFmx0CC1coYpSeKISifjUJESxUkjFIhXJCqkWGTEJS2iiE58ARShEIYpQhAIUnuAEJioB0SZ6IhXjZFYsVBGKPGr1roCUaVzXdQtYrGIUnAgqXhvIiVGsgqYuo8UrVnEKUXxCE5ao56co4dVPaPOYahudZjfL2c569rOgDa1oR0ta6wQEADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="}};var In=class extends Ce.Modal{constructor(t,r,n){super(t.app);this.plugin=t,this.selectedText=r,this.wholeText=n,this.containerEl.setAttr("id","aibotAskAiModal"),this.deepSeekAPI=new gn(t,i=>this.onResult(i),()=>this.onFinish(),i=>this.onError(i)),this.marked=new Br}onOpen(){let{contentEl:t}=this;if(this.topToolBar=t.createEl("div",{attr:{id:"aiBotTopToolBar"}}),this.noContextRadioButton=this.topToolBar.createEl("input",{attr:{type:"radio",id:"noContextRadioButton",name:"contextRadioButton"}}),this.topToolBar.createEl("label",{attr:{for:"noContextRadioButton"}}).innerText="No context",this.selectionAsContextRadioButton=this.topToolBar.createEl("input",{attr:{type:"radio",id:"selectionAsContextRadioButton",name:"contextRadioButton"}}),this.topToolBar.createEl("label",{attr:{id:"selectionAsContextLabel",for:"selectionAsContextRadioButton"}}).innerText="Selected text",this.selectedText!==""&&this.selectionAsContextRadioButton.setAttr("checked",!0),this.wholeTextAsContextRadioButton=this.topToolBar.createEl("input",{attr:{type:"radio",id:"wholeTextAsContextRadioButton",name:"contextRadioButton"}}),this.topToolBar.createEl("label",{attr:{for:"wholeTextAsContextRadioButton"}}).innerText="Full note",this.selectedText===""){let r=document.getElementById("selectionAsContextLabel");r&&this.hideEl(r),this.hideEl(this.selectionAsContextRadioButton),this.wholeTextAsContextRadioButton.setAttr("checked",!0)}new Ce.Setting(t).addText(r=>{this.inputEl=r.inputEl,this.inputEl.placeholder="Ask AI bot",this.inputEl.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),this.onOk())}),r.setValue(this.userInput).onChange(n=>{this.userInput=n}),setTimeout(()=>{this.inputEl.focus()},100)}).addButton(r=>{this.okButton=r.buttonEl,this.okButton.setAttr("id","aibotOkButton"),r.setButtonText("Ask AI").setCta().setIcon("sparkles").onClick(()=>this.onOk())}).addButton(r=>{this.cancelButton=r.buttonEl,this.cancelButton.setAttr("id","aibotCancelButton"),this.cancelButton.setAttr("class","mod-warning"),r.setButtonText("Cancel").setCta().onClick(()=>this.deepSeekAPI.cancel=!0),this.hideEl(this.cancelButton)}),this.displayEl=t.createEl("div",{attr:{id:"aibotDisplay"}}),this.hideEl(this.displayEl,"aibot-block"),this.bottomToolBar=t.createEl("div",{attr:{id:"aibotBottomToolBar"}}),this.hideEl(this.bottomToolBar),this.copyButton=this.bottomToolBar.createEl("button",{attr:{id:"copyButton"}}),this.copyButton.textContent="Copy",this.copyButton.addEventListener("click",()=>this.copyResult()),this.selectedText!==""&&(this.replaceSelectionButton=this.bottomToolBar.createEl("button",{attr:{id:"replaceSelectionButton"}}),this.replaceSelectionButton.textContent="Replace the selected text",this.replaceSelectionButton.addEventListener("click",()=>this.replaceSelection())),this.insertToCursorPosButton=this.bottomToolBar.createEl("button",{attr:{id:"insertToCursorPosButton"}}),this.insertToCursorPosButton.textContent="Insert at cursor position",this.insertToCursorPosButton.addEventListener("click",()=>this.insertToCursorPos()),this.appendToTailButton=this.bottomToolBar.createEl("button",{attr:{id:"appendToTailButton"}}),this.appendToTailButton.textContent="Append to the end",this.appendToTailButton.addEventListener("click",()=>this.appendToTail()),this.loadingEl=t.createEl("div",{attr:{id:"aibotLoading"}}),this.loadingEl.createEl("img",{attr:{src:new xn().loadingGif}}),this.hideEl(this.loadingEl)}onResult(t){this.hideEl(this.loadingEl),this.showEl(this.displayEl,"aibot-block"),this.showEl(this.cancelButton),this.appendToDisplay(t)}onFinish(){this.showEl(this.bottomToolBar),this.hideEl(this.cancelButton),this.enableGUI(!0)}onError(t){this.showEl(this.displayEl,"aibot-block"),this.appendErrorToDisplay(t),this.hideEl(this.loadingEl),this.hideEl(this.cancelButton),this.enableGUI(!0)}insertToCursorPos(){let t=this.getEditor(),r=this.getResult();if(!t)return;let n=t.getCursor();t.replaceRange(`
`+r+`
`,n);let i={line:n.line,ch:n.ch+r.length+1};t.setCursor(i),this.close()}appendToTail(){let t=this.getEditor(),r=this.getResult();if(!t)return;let i=t.getValue()+`

`+r;t.setValue(i);let o=t.lastLine(),a=t.getLine(o);t.setCursor({line:o,ch:a.length}),this.close()}replaceSelection(){let t=this.getEditor(),r=this.getResult();t&&(t.replaceSelection(r),this.close())}copyResult(){let t=this.getResult();navigator.clipboard.writeText(t).then(()=>{new Ce.Notice("Text has been successfully copied to the clipboard.")}).catch(r=>{new Ce.Notice("Copy failed, please try again."),console.error("Copy failed: ",r)})}getResult(){return this.displayEl.innerText}getEditor(){let t=this.app.workspace.getActiveViewOfType(Ce.MarkdownView);return t?t.editor:null}appendToDisplay(t){var o;let r=document.createDocumentFragment(),n=t.split(`
`),i=0;n.forEach(a=>{let l=document.createElement("span");l.textContent=a,r.appendChild(l),i>0&&r.appendChild(document.createElement("br")),i+=1}),this.displayEl&&(this.displayEl.appendChild(r),(o=this.displayEl.lastElementChild)==null||o.scrollIntoView({behavior:"smooth"}))}appendErrorToDisplay(t){this.displayEl&&this.displayEl.createEl("span",{cls:"aibot-error-text",text:t})}onOk(){this.hideEl(this.displayEl,"aibot-block"),this.hideEl(this.bottomToolBar),this.showEl(this.loadingEl),this.clearDisplay(),this.enableGUI(!1);let t="";this.wholeTextAsContextRadioButton.checked?t=this.wholeText:this.selectedText!==""&&this.selectionAsContextRadioButton.checked&&(t=this.selectedText),this.deepSeekAPI.askAI(this.userInput,t)}onClose(){let{contentEl:t}=this;t.empty()}enableGUI(t){this.okButton.disabled=!t,this.inputEl.disabled=!t,this.noContextRadioButton.disabled=!t,this.selectionAsContextRadioButton.disabled=!t,this.wholeTextAsContextRadioButton.disabled=!t}clearDisplay(){this.displayEl.empty()}showEl(t,r="aibot-flex"){t&&(t.classList.remove("aibot-hide"),t.classList.add(r))}hideEl(t,r="aibot-flex"){t&&(t.classList.remove(r),t.classList.add("aibot-hide"))}};var mt=require("obsidian"),kn=class extends mt.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this;t.setAttr("id","aiBotSetting"),t.empty(),new mt.Setting(t).setName("Base URL").setDesc("API base URL.").addText(r=>{r.inputEl.classList.add("setting-input"),r.setPlaceholder("Enter your base URL").setValue(this.plugin.settings.baseURL).onChange(async n=>{this.plugin.settings.baseURL=n,await this.plugin.saveSettings()})}),new mt.Setting(t).setName("API key").setDesc("API key is stored in plain text locally.").addText(r=>{this.apiKeyInputEl=r.inputEl,this.apiKeyInputEl.classList.add("setting-input"),this.apiKeyInputEl.setAttr("type","password"),r.setPlaceholder("Enter your API key").setValue(this.plugin.settings.apiKey).onChange(async n=>{this.plugin.settings.apiKey=n,await this.plugin.saveSettings()})}).addButton(r=>{r.setIcon("eye"),r.onClick(n=>{this.apiKeyInputEl.type==="password"?(this.apiKeyInputEl.type="text",r.setIcon("eye-off")):(this.apiKeyInputEl.type="password",r.setIcon("eye"))})}),new mt.Setting(t).setName("Model").setDesc("API model").addText(r=>r.setPlaceholder("Enter your model").setValue(this.plugin.settings.model).onChange(async n=>{this.plugin.settings.model=n,await this.plugin.saveSettings()})),new mt.Setting(t).setName("Max tokens").setDesc("The max tokens of the model").addSlider(r=>r.setLimits(128,32768,16).setInstant(!0).setValue(this.plugin.settings.maxTokens).onChange(async n=>{this.maxTokensEl.setValue(n.toString()),this.plugin.settings.maxTokens=n,await this.plugin.saveSettings()})).addText(r=>{this.maxTokensEl=r,r.inputEl.setAttr("id","aibotMaxTokensInput"),r.setDisabled(!0).setValue(this.plugin.settings.maxTokens.toString())})}};var La={baseURL:"https://api.deepseek.com",apiKey:"",model:"deepseek-chat",maxTokens:4096},En=class extends ur.Plugin{async onload(){await this.loadSettings(),this.addRibbonIcon("sparkles","Ask AI",t=>{if(!this.isConfigured()){new ur.Notice("Please configure base URL, API Key, model first");return}let r=this.getEditor();this.openAskAiModal(r)}),this.addCommand({id:"open-ask-ai-modal",name:"Ask AI",icon:"sparkles",callback:async()=>{let t=this.getEditor();t&&this.openAskAiModal(t)}}),this.registerEvent(this.app.workspace.on("editor-menu",(t,r,n)=>{t.addItem(i=>{i.setTitle("Ask AI").setIcon("sparkles").onClick(async()=>{this.openAskAiModal(r)})})})),this.addSettingTab(new kn(this.app,this))}onunload(){}openAskAiModal(t){t&&new In(this,t.getSelection(),t.getValue()).open()}isConfigured(){return this.settings.baseURL!==""&&this.settings.apiKey!==""&&this.settings.model!==""}getEditor(){let t=this.app.workspace.getActiveViewOfType(ur.MarkdownView);return t?t.editor:null}async loadSettings(){this.settings=Object.assign({},La,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};

/* nosourcemap */